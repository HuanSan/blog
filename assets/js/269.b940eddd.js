(window.webpackJsonp=window.webpackJsonp||[]).push([[269],{584:function(e,t,r){"use strict";r.r(t);var v=r(10),i=Object(v.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"源码分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码分析"}},[e._v("#")]),e._v(" 源码分析")]),e._v(" "),t("p",[e._v("vue3源码最核心的部分：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("reactivity")])]),e._v(" "),t("li",[t("code",[e._v("compiler-core")])]),e._v(" "),t("li",[t("code",[e._v("runtime-core")])]),e._v(" "),t("li",[t("code",[e._v("runtime-dom")])])]),e._v(" "),t("h2",{attrs:{id:"reactivity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reactivity"}},[e._v("#")]),e._v(" reactivity")]),e._v(" "),t("ul",[t("li",[e._v("响应式原理 reactive 的实现")]),e._v(" "),t("li",[e._v("ref 和 computed 的实现")]),e._v(" "),t("li",[e._v("effect 里面使用 track 依赖收集和 trigger 触发依赖")]),e._v(" "),t("li",[e._v("dep 存储 effect")])]),e._v(" "),t("h2",{attrs:{id:"compiler-core"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compiler-core"}},[e._v("#")]),e._v(" compiler-core")]),e._v(" "),t("ul",[t("li",[e._v("把 template 字符串调用 baseParse 成 ast，再调用 generate 生成 render 函数")]),e._v(" "),t("li",[e._v("解析插值，解析 element，解析 text")])]),e._v(" "),t("h2",{attrs:{id:"runtime-core"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#runtime-core"}},[e._v("#")]),e._v(" runtime-core")]),e._v(" "),t("ul",[t("li",[e._v("实现 render => patch")]),e._v(" "),t("li",[e._v("setup 可获取 props 和 context")]),e._v(" "),t("li",[e._v("实现 component emit，props，slots")]),e._v(" "),t("li",[e._v("创建 vnode")]),e._v(" "),t("li",[e._v("实现 provide/inject")]),e._v(" "),t("li",[e._v("实现 nextTick （里面使用 Promise 实现）")]),e._v(" "),t("li",[e._v("patch 里面实现 diff 算法")])]),e._v(" "),t("h2",{attrs:{id:"runtime-dom"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#runtime-dom"}},[e._v("#")]),e._v(" runtime-dom")]),e._v(" "),t("ul",[t("li",[e._v("实现 createElement 函数逻辑")])]),e._v(" "),t("h2",{attrs:{id:"diff-算法更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#diff-算法更新"}},[e._v("#")]),e._v(" diff 算法更新")]),e._v(" "),t("ul",[t("li",[e._v("对比新旧节点头部相同指针的节点，相同则进行diff，不同则跳转下一步。")]),e._v(" "),t("li",[e._v("对比新旧节点尾部指针指向节点，相同则进行diff，不同则跳转下一步。")]),e._v(" "),t("li",[e._v("此时剩余新旧节点，可能存在乱序、已移除或新增的情况，进行特殊处理来更新。")])]),e._v(" "),t("p",[e._v("对比 vu2 :")]),e._v(" "),t("p",[e._v("vue3 在 diff 算法中相比 vue2 增加了静态标记, patch 过程中就会判断这个标记来 Diff 优化流程，跳过一些静态节点对比")])])}),[],!1,null,null,null);t.default=i.exports}}]);