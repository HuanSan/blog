<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>本地部署minigpt4 | sanyer</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="stylesheet" href="/blog/css/index.css">
    <script src="/blog/js/index.js"></script>
    <meta name="description" content="This is sanyer&#39;s blog.">
    
    <link rel="preload" href="/blog/assets/css/0.styles.ed45a4b6.css" as="style"><link rel="preload" href="/blog/assets/js/app.5b16b95b.js" as="script"><link rel="preload" href="/blog/assets/js/2.ce51b73f.js" as="script"><link rel="preload" href="/blog/assets/js/116.3b112a11.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.1beb9fb6.js"><link rel="prefetch" href="/blog/assets/js/100.78a7a872.js"><link rel="prefetch" href="/blog/assets/js/101.e876dfb3.js"><link rel="prefetch" href="/blog/assets/js/102.40c3fefe.js"><link rel="prefetch" href="/blog/assets/js/103.3b568fb8.js"><link rel="prefetch" href="/blog/assets/js/104.e0626d88.js"><link rel="prefetch" href="/blog/assets/js/105.987864a1.js"><link rel="prefetch" href="/blog/assets/js/106.7cd63a25.js"><link rel="prefetch" href="/blog/assets/js/107.6b5bfef1.js"><link rel="prefetch" href="/blog/assets/js/108.e707baf7.js"><link rel="prefetch" href="/blog/assets/js/109.3caa57c9.js"><link rel="prefetch" href="/blog/assets/js/11.dc6f58b3.js"><link rel="prefetch" href="/blog/assets/js/110.9c14a590.js"><link rel="prefetch" href="/blog/assets/js/111.9af0dc33.js"><link rel="prefetch" href="/blog/assets/js/112.a5b645a6.js"><link rel="prefetch" href="/blog/assets/js/113.30e4a1c4.js"><link rel="prefetch" href="/blog/assets/js/114.3c00421b.js"><link rel="prefetch" href="/blog/assets/js/115.db305846.js"><link rel="prefetch" href="/blog/assets/js/117.83342926.js"><link rel="prefetch" href="/blog/assets/js/118.439806a5.js"><link rel="prefetch" href="/blog/assets/js/119.c97f1770.js"><link rel="prefetch" href="/blog/assets/js/12.d2ec0e54.js"><link rel="prefetch" href="/blog/assets/js/120.641cbb74.js"><link rel="prefetch" href="/blog/assets/js/121.d772dcaf.js"><link rel="prefetch" href="/blog/assets/js/122.3abdec5a.js"><link rel="prefetch" href="/blog/assets/js/123.999ffb62.js"><link rel="prefetch" href="/blog/assets/js/124.b70ab92a.js"><link rel="prefetch" href="/blog/assets/js/125.f81c8163.js"><link rel="prefetch" href="/blog/assets/js/126.99f25a09.js"><link rel="prefetch" href="/blog/assets/js/127.56a6b9bc.js"><link rel="prefetch" href="/blog/assets/js/128.72e0b90d.js"><link rel="prefetch" href="/blog/assets/js/129.b3348488.js"><link rel="prefetch" href="/blog/assets/js/13.f34631c3.js"><link rel="prefetch" href="/blog/assets/js/130.41e7a370.js"><link rel="prefetch" href="/blog/assets/js/131.a1e05f35.js"><link rel="prefetch" href="/blog/assets/js/132.fc8fc1c5.js"><link rel="prefetch" href="/blog/assets/js/133.58177d57.js"><link rel="prefetch" href="/blog/assets/js/134.a8b2ac39.js"><link rel="prefetch" href="/blog/assets/js/135.a479233d.js"><link rel="prefetch" href="/blog/assets/js/136.83629056.js"><link rel="prefetch" href="/blog/assets/js/137.69515367.js"><link rel="prefetch" href="/blog/assets/js/138.54b922b7.js"><link rel="prefetch" href="/blog/assets/js/139.63767886.js"><link rel="prefetch" href="/blog/assets/js/14.4a3824e4.js"><link rel="prefetch" href="/blog/assets/js/140.283e42b5.js"><link rel="prefetch" href="/blog/assets/js/141.8abb952b.js"><link rel="prefetch" href="/blog/assets/js/142.66ba18fc.js"><link rel="prefetch" href="/blog/assets/js/143.3be2ab05.js"><link rel="prefetch" href="/blog/assets/js/144.48f016b5.js"><link rel="prefetch" href="/blog/assets/js/145.2cb5acf6.js"><link rel="prefetch" href="/blog/assets/js/146.2bfd54b7.js"><link rel="prefetch" href="/blog/assets/js/147.32041c18.js"><link rel="prefetch" href="/blog/assets/js/148.1ecc82b8.js"><link rel="prefetch" href="/blog/assets/js/149.a39eb51e.js"><link rel="prefetch" href="/blog/assets/js/15.3c5e8ed3.js"><link rel="prefetch" href="/blog/assets/js/150.6c61734d.js"><link rel="prefetch" href="/blog/assets/js/151.79877132.js"><link rel="prefetch" href="/blog/assets/js/152.c5c968e7.js"><link rel="prefetch" href="/blog/assets/js/153.8ef75491.js"><link rel="prefetch" href="/blog/assets/js/154.0cd5aff4.js"><link rel="prefetch" href="/blog/assets/js/155.e3144283.js"><link rel="prefetch" href="/blog/assets/js/156.3c3d72b0.js"><link rel="prefetch" href="/blog/assets/js/157.35662033.js"><link rel="prefetch" href="/blog/assets/js/158.6bc77260.js"><link rel="prefetch" href="/blog/assets/js/159.46d09365.js"><link rel="prefetch" href="/blog/assets/js/16.c3e6c3a0.js"><link rel="prefetch" href="/blog/assets/js/160.2a36cc81.js"><link rel="prefetch" href="/blog/assets/js/161.21033748.js"><link rel="prefetch" href="/blog/assets/js/162.4a88763c.js"><link rel="prefetch" href="/blog/assets/js/163.55f1e9a0.js"><link rel="prefetch" href="/blog/assets/js/164.ea25fc90.js"><link rel="prefetch" href="/blog/assets/js/165.d07ce87d.js"><link rel="prefetch" href="/blog/assets/js/166.d6d71184.js"><link rel="prefetch" href="/blog/assets/js/167.4228a2b3.js"><link rel="prefetch" href="/blog/assets/js/168.edad0f0f.js"><link rel="prefetch" href="/blog/assets/js/169.57c43904.js"><link rel="prefetch" href="/blog/assets/js/17.06b05f76.js"><link rel="prefetch" href="/blog/assets/js/170.e305117c.js"><link rel="prefetch" href="/blog/assets/js/171.b8d59901.js"><link rel="prefetch" href="/blog/assets/js/172.a6dd37ec.js"><link rel="prefetch" href="/blog/assets/js/173.6fd08a97.js"><link rel="prefetch" href="/blog/assets/js/174.e269ec38.js"><link rel="prefetch" href="/blog/assets/js/175.0deae6f8.js"><link rel="prefetch" href="/blog/assets/js/176.56bb4205.js"><link rel="prefetch" href="/blog/assets/js/177.6956b3b1.js"><link rel="prefetch" href="/blog/assets/js/178.d6a579e3.js"><link rel="prefetch" href="/blog/assets/js/179.cf6fede7.js"><link rel="prefetch" href="/blog/assets/js/18.16b0b2a6.js"><link rel="prefetch" href="/blog/assets/js/180.3d63f0f4.js"><link rel="prefetch" href="/blog/assets/js/181.5684462e.js"><link rel="prefetch" href="/blog/assets/js/182.95ce104e.js"><link rel="prefetch" href="/blog/assets/js/183.1c5d46e0.js"><link rel="prefetch" href="/blog/assets/js/184.eea307b8.js"><link rel="prefetch" href="/blog/assets/js/185.74bb1eba.js"><link rel="prefetch" href="/blog/assets/js/186.ccef468a.js"><link rel="prefetch" href="/blog/assets/js/187.e72f9e54.js"><link rel="prefetch" href="/blog/assets/js/188.4f9a8a0e.js"><link rel="prefetch" href="/blog/assets/js/189.cb423e04.js"><link rel="prefetch" href="/blog/assets/js/19.4b885fe2.js"><link rel="prefetch" href="/blog/assets/js/190.5a3dc9fc.js"><link rel="prefetch" href="/blog/assets/js/191.f8f5353d.js"><link rel="prefetch" href="/blog/assets/js/192.c6ab73dc.js"><link rel="prefetch" href="/blog/assets/js/193.3273121b.js"><link rel="prefetch" href="/blog/assets/js/194.0ed3213f.js"><link rel="prefetch" href="/blog/assets/js/195.cf88fb59.js"><link rel="prefetch" href="/blog/assets/js/196.14095487.js"><link rel="prefetch" href="/blog/assets/js/197.6641da9f.js"><link rel="prefetch" href="/blog/assets/js/198.fe4b7b2e.js"><link rel="prefetch" href="/blog/assets/js/199.8ac9e953.js"><link rel="prefetch" href="/blog/assets/js/20.02d46077.js"><link rel="prefetch" href="/blog/assets/js/200.718c9c02.js"><link rel="prefetch" href="/blog/assets/js/201.922e08de.js"><link rel="prefetch" href="/blog/assets/js/202.00ad7a9a.js"><link rel="prefetch" href="/blog/assets/js/203.967db34e.js"><link rel="prefetch" href="/blog/assets/js/204.6f02af12.js"><link rel="prefetch" href="/blog/assets/js/205.6418c29e.js"><link rel="prefetch" href="/blog/assets/js/206.8ce2aed3.js"><link rel="prefetch" href="/blog/assets/js/207.60fea220.js"><link rel="prefetch" href="/blog/assets/js/208.21864f54.js"><link rel="prefetch" href="/blog/assets/js/209.eeab8469.js"><link rel="prefetch" href="/blog/assets/js/21.21e22d6a.js"><link rel="prefetch" href="/blog/assets/js/210.77c5e059.js"><link rel="prefetch" href="/blog/assets/js/211.d071ce16.js"><link rel="prefetch" href="/blog/assets/js/212.987e1d05.js"><link rel="prefetch" href="/blog/assets/js/213.26c78758.js"><link rel="prefetch" href="/blog/assets/js/214.2be4739f.js"><link rel="prefetch" href="/blog/assets/js/215.90970e6f.js"><link rel="prefetch" href="/blog/assets/js/216.1fe55198.js"><link rel="prefetch" href="/blog/assets/js/217.dfba6ad4.js"><link rel="prefetch" href="/blog/assets/js/218.ff7ee54c.js"><link rel="prefetch" href="/blog/assets/js/219.7dd72891.js"><link rel="prefetch" href="/blog/assets/js/22.b75fd647.js"><link rel="prefetch" href="/blog/assets/js/220.16e90951.js"><link rel="prefetch" href="/blog/assets/js/221.97ad4237.js"><link rel="prefetch" href="/blog/assets/js/222.365b5969.js"><link rel="prefetch" href="/blog/assets/js/223.12cc23fc.js"><link rel="prefetch" href="/blog/assets/js/224.7871ad89.js"><link rel="prefetch" href="/blog/assets/js/225.d4572565.js"><link rel="prefetch" href="/blog/assets/js/226.3925099d.js"><link rel="prefetch" href="/blog/assets/js/227.71b59000.js"><link rel="prefetch" href="/blog/assets/js/228.346e94cc.js"><link rel="prefetch" href="/blog/assets/js/229.8efab7fc.js"><link rel="prefetch" href="/blog/assets/js/23.2e266fc0.js"><link rel="prefetch" href="/blog/assets/js/230.21f6650b.js"><link rel="prefetch" href="/blog/assets/js/231.4c60e2b0.js"><link rel="prefetch" href="/blog/assets/js/232.b8c5ab88.js"><link rel="prefetch" href="/blog/assets/js/233.48640c3d.js"><link rel="prefetch" href="/blog/assets/js/234.8092c110.js"><link rel="prefetch" href="/blog/assets/js/235.c1f8188a.js"><link rel="prefetch" href="/blog/assets/js/236.dd8d0b99.js"><link rel="prefetch" href="/blog/assets/js/237.06dbaf76.js"><link rel="prefetch" href="/blog/assets/js/238.315e31e8.js"><link rel="prefetch" href="/blog/assets/js/239.6397138a.js"><link rel="prefetch" href="/blog/assets/js/24.77928626.js"><link rel="prefetch" href="/blog/assets/js/240.3e003ded.js"><link rel="prefetch" href="/blog/assets/js/241.3f1b1f78.js"><link rel="prefetch" href="/blog/assets/js/242.f0c3357b.js"><link rel="prefetch" href="/blog/assets/js/243.34acf4a4.js"><link rel="prefetch" href="/blog/assets/js/244.fff09a4f.js"><link rel="prefetch" href="/blog/assets/js/245.48239dac.js"><link rel="prefetch" href="/blog/assets/js/246.e2909914.js"><link rel="prefetch" href="/blog/assets/js/247.934816f0.js"><link rel="prefetch" href="/blog/assets/js/248.18d7c04e.js"><link rel="prefetch" href="/blog/assets/js/249.ce9ed583.js"><link rel="prefetch" href="/blog/assets/js/25.a821f5e8.js"><link rel="prefetch" href="/blog/assets/js/250.f8f7bd9b.js"><link rel="prefetch" href="/blog/assets/js/251.d67044c0.js"><link rel="prefetch" href="/blog/assets/js/252.4821b0d8.js"><link rel="prefetch" href="/blog/assets/js/253.8b159d55.js"><link rel="prefetch" href="/blog/assets/js/254.8728c249.js"><link rel="prefetch" href="/blog/assets/js/255.37d8e630.js"><link rel="prefetch" href="/blog/assets/js/256.e52e79c6.js"><link rel="prefetch" href="/blog/assets/js/257.3df1f4e3.js"><link rel="prefetch" href="/blog/assets/js/258.40f608d8.js"><link rel="prefetch" href="/blog/assets/js/259.908bbf51.js"><link rel="prefetch" href="/blog/assets/js/26.cd7594ef.js"><link rel="prefetch" href="/blog/assets/js/260.fdfb8d03.js"><link rel="prefetch" href="/blog/assets/js/261.c3e19d7a.js"><link rel="prefetch" href="/blog/assets/js/262.36368dce.js"><link rel="prefetch" href="/blog/assets/js/263.3788c713.js"><link rel="prefetch" href="/blog/assets/js/264.c5cae199.js"><link rel="prefetch" href="/blog/assets/js/265.6fe0be56.js"><link rel="prefetch" href="/blog/assets/js/266.540778b7.js"><link rel="prefetch" href="/blog/assets/js/267.19c7a698.js"><link rel="prefetch" href="/blog/assets/js/268.b041fe8f.js"><link rel="prefetch" href="/blog/assets/js/269.aef66ae6.js"><link rel="prefetch" href="/blog/assets/js/27.8317731b.js"><link rel="prefetch" href="/blog/assets/js/270.36e6afc5.js"><link rel="prefetch" href="/blog/assets/js/271.3a5e5a8a.js"><link rel="prefetch" href="/blog/assets/js/272.27cc612e.js"><link rel="prefetch" href="/blog/assets/js/273.aba98a93.js"><link rel="prefetch" href="/blog/assets/js/274.0fd1b1f2.js"><link rel="prefetch" href="/blog/assets/js/275.0a9cc56d.js"><link rel="prefetch" href="/blog/assets/js/276.d70ba01e.js"><link rel="prefetch" href="/blog/assets/js/277.8aa3e238.js"><link rel="prefetch" href="/blog/assets/js/278.2d5d1859.js"><link rel="prefetch" href="/blog/assets/js/279.611fc972.js"><link rel="prefetch" href="/blog/assets/js/28.fedb4ffe.js"><link rel="prefetch" href="/blog/assets/js/280.ad3a3d5e.js"><link rel="prefetch" href="/blog/assets/js/281.ce9f195d.js"><link rel="prefetch" href="/blog/assets/js/282.a117e1c6.js"><link rel="prefetch" href="/blog/assets/js/283.90bacef1.js"><link rel="prefetch" href="/blog/assets/js/284.fd4d953b.js"><link rel="prefetch" href="/blog/assets/js/285.bbcac5fd.js"><link rel="prefetch" href="/blog/assets/js/286.3c6481b1.js"><link rel="prefetch" href="/blog/assets/js/287.43a2e964.js"><link rel="prefetch" href="/blog/assets/js/288.557272bc.js"><link rel="prefetch" href="/blog/assets/js/289.2f297ca3.js"><link rel="prefetch" href="/blog/assets/js/29.1c1842b0.js"><link rel="prefetch" href="/blog/assets/js/290.3a0346ca.js"><link rel="prefetch" href="/blog/assets/js/291.feb592c9.js"><link rel="prefetch" href="/blog/assets/js/292.6207161f.js"><link rel="prefetch" href="/blog/assets/js/293.e852a837.js"><link rel="prefetch" href="/blog/assets/js/294.f220a173.js"><link rel="prefetch" href="/blog/assets/js/295.65e50031.js"><link rel="prefetch" href="/blog/assets/js/296.7d516f21.js"><link rel="prefetch" href="/blog/assets/js/297.f1ae2040.js"><link rel="prefetch" href="/blog/assets/js/298.1c04e1ba.js"><link rel="prefetch" href="/blog/assets/js/299.99cb04f0.js"><link rel="prefetch" href="/blog/assets/js/3.04706ae3.js"><link rel="prefetch" href="/blog/assets/js/30.ed4e9f7e.js"><link rel="prefetch" href="/blog/assets/js/300.3516d1c1.js"><link rel="prefetch" href="/blog/assets/js/301.83de061a.js"><link rel="prefetch" href="/blog/assets/js/302.6afb8d4a.js"><link rel="prefetch" href="/blog/assets/js/303.aa63b0e9.js"><link rel="prefetch" href="/blog/assets/js/304.1fcfd3a1.js"><link rel="prefetch" href="/blog/assets/js/305.8c0ff3b3.js"><link rel="prefetch" href="/blog/assets/js/306.31292d5e.js"><link rel="prefetch" href="/blog/assets/js/307.b16a8c9a.js"><link rel="prefetch" href="/blog/assets/js/308.4ec94174.js"><link rel="prefetch" href="/blog/assets/js/309.02c67702.js"><link rel="prefetch" href="/blog/assets/js/31.6af53604.js"><link rel="prefetch" href="/blog/assets/js/310.b3836fba.js"><link rel="prefetch" href="/blog/assets/js/311.b43d8ca0.js"><link rel="prefetch" href="/blog/assets/js/312.01c97c7e.js"><link rel="prefetch" href="/blog/assets/js/313.8b005991.js"><link rel="prefetch" href="/blog/assets/js/314.094d95ea.js"><link rel="prefetch" href="/blog/assets/js/315.d0833c61.js"><link rel="prefetch" href="/blog/assets/js/316.dbb7d3d7.js"><link rel="prefetch" href="/blog/assets/js/317.3327be0b.js"><link rel="prefetch" href="/blog/assets/js/318.4c1bfdd2.js"><link rel="prefetch" href="/blog/assets/js/319.d4f86654.js"><link rel="prefetch" href="/blog/assets/js/32.b6154ed1.js"><link rel="prefetch" href="/blog/assets/js/320.d56450ee.js"><link rel="prefetch" href="/blog/assets/js/321.fb6fd9fc.js"><link rel="prefetch" href="/blog/assets/js/322.4f98bd16.js"><link rel="prefetch" href="/blog/assets/js/323.1742930a.js"><link rel="prefetch" href="/blog/assets/js/324.7d3cff9c.js"><link rel="prefetch" href="/blog/assets/js/325.0385315a.js"><link rel="prefetch" href="/blog/assets/js/326.6187e736.js"><link rel="prefetch" href="/blog/assets/js/327.285c81e8.js"><link rel="prefetch" href="/blog/assets/js/328.2bf4f5a5.js"><link rel="prefetch" href="/blog/assets/js/329.9b324b65.js"><link rel="prefetch" href="/blog/assets/js/33.04c279e4.js"><link rel="prefetch" href="/blog/assets/js/330.9b272f69.js"><link rel="prefetch" href="/blog/assets/js/331.66389d05.js"><link rel="prefetch" href="/blog/assets/js/332.3459726d.js"><link rel="prefetch" href="/blog/assets/js/333.498386c0.js"><link rel="prefetch" href="/blog/assets/js/334.169058d1.js"><link rel="prefetch" href="/blog/assets/js/335.7a72b94a.js"><link rel="prefetch" href="/blog/assets/js/336.7b3efe19.js"><link rel="prefetch" href="/blog/assets/js/337.2bb4bc4b.js"><link rel="prefetch" href="/blog/assets/js/338.af7c63f9.js"><link rel="prefetch" href="/blog/assets/js/34.c1f8f1cf.js"><link rel="prefetch" href="/blog/assets/js/35.38e6fcf8.js"><link rel="prefetch" href="/blog/assets/js/36.7b441d92.js"><link rel="prefetch" href="/blog/assets/js/37.3047bdcc.js"><link rel="prefetch" href="/blog/assets/js/38.dca1f97d.js"><link rel="prefetch" href="/blog/assets/js/39.eba9f0a3.js"><link rel="prefetch" href="/blog/assets/js/4.d07b7ec3.js"><link rel="prefetch" href="/blog/assets/js/40.28402d24.js"><link rel="prefetch" href="/blog/assets/js/41.a027113e.js"><link rel="prefetch" href="/blog/assets/js/42.3e7648f9.js"><link rel="prefetch" href="/blog/assets/js/43.55cca813.js"><link rel="prefetch" href="/blog/assets/js/44.8a32771c.js"><link rel="prefetch" href="/blog/assets/js/45.c990aee4.js"><link rel="prefetch" href="/blog/assets/js/46.dbd57361.js"><link rel="prefetch" href="/blog/assets/js/47.3d61009a.js"><link rel="prefetch" href="/blog/assets/js/48.072522d0.js"><link rel="prefetch" href="/blog/assets/js/49.485e14c9.js"><link rel="prefetch" href="/blog/assets/js/5.b3a15d2b.js"><link rel="prefetch" href="/blog/assets/js/50.bc357b9d.js"><link rel="prefetch" href="/blog/assets/js/51.cfbbac25.js"><link rel="prefetch" href="/blog/assets/js/52.b2db688e.js"><link rel="prefetch" href="/blog/assets/js/53.81ee396d.js"><link rel="prefetch" href="/blog/assets/js/54.7197238b.js"><link rel="prefetch" href="/blog/assets/js/55.523a5038.js"><link rel="prefetch" href="/blog/assets/js/56.33ff33af.js"><link rel="prefetch" href="/blog/assets/js/57.79fc448e.js"><link rel="prefetch" href="/blog/assets/js/58.d875da24.js"><link rel="prefetch" href="/blog/assets/js/59.174804a8.js"><link rel="prefetch" href="/blog/assets/js/6.2da0b1b8.js"><link rel="prefetch" href="/blog/assets/js/60.7a95c355.js"><link rel="prefetch" href="/blog/assets/js/61.84b5131b.js"><link rel="prefetch" href="/blog/assets/js/62.c76781ac.js"><link rel="prefetch" href="/blog/assets/js/63.11f111ab.js"><link rel="prefetch" href="/blog/assets/js/64.8e5eaaf4.js"><link rel="prefetch" href="/blog/assets/js/65.c0abd00c.js"><link rel="prefetch" href="/blog/assets/js/66.34652da6.js"><link rel="prefetch" href="/blog/assets/js/67.3752090a.js"><link rel="prefetch" href="/blog/assets/js/68.f3f3fba8.js"><link rel="prefetch" href="/blog/assets/js/69.90367aea.js"><link rel="prefetch" href="/blog/assets/js/7.b99bfa5d.js"><link rel="prefetch" href="/blog/assets/js/70.4190a202.js"><link rel="prefetch" href="/blog/assets/js/71.ab556132.js"><link rel="prefetch" href="/blog/assets/js/72.2cbaa5cf.js"><link rel="prefetch" href="/blog/assets/js/73.1c25c460.js"><link rel="prefetch" href="/blog/assets/js/74.b3b6e573.js"><link rel="prefetch" href="/blog/assets/js/75.abef8e3f.js"><link rel="prefetch" href="/blog/assets/js/76.afd876b4.js"><link rel="prefetch" href="/blog/assets/js/77.a92c5641.js"><link rel="prefetch" href="/blog/assets/js/78.ef3544bf.js"><link rel="prefetch" href="/blog/assets/js/79.453d7be0.js"><link rel="prefetch" href="/blog/assets/js/8.5e191761.js"><link rel="prefetch" href="/blog/assets/js/80.e3a60934.js"><link rel="prefetch" href="/blog/assets/js/81.02f9b9f5.js"><link rel="prefetch" href="/blog/assets/js/82.e959b73b.js"><link rel="prefetch" href="/blog/assets/js/83.682724d5.js"><link rel="prefetch" href="/blog/assets/js/84.cfcbf12b.js"><link rel="prefetch" href="/blog/assets/js/85.5a4744dc.js"><link rel="prefetch" href="/blog/assets/js/86.343c3c9e.js"><link rel="prefetch" href="/blog/assets/js/87.93d4875d.js"><link rel="prefetch" href="/blog/assets/js/88.77c9e93d.js"><link rel="prefetch" href="/blog/assets/js/89.3141be98.js"><link rel="prefetch" href="/blog/assets/js/9.61f721fe.js"><link rel="prefetch" href="/blog/assets/js/90.36493405.js"><link rel="prefetch" href="/blog/assets/js/91.6f45acfe.js"><link rel="prefetch" href="/blog/assets/js/92.d681a644.js"><link rel="prefetch" href="/blog/assets/js/93.e2a3ffff.js"><link rel="prefetch" href="/blog/assets/js/94.8849c094.js"><link rel="prefetch" href="/blog/assets/js/95.a54f6f93.js"><link rel="prefetch" href="/blog/assets/js/96.0f226d33.js"><link rel="prefetch" href="/blog/assets/js/97.e4062ea5.js"><link rel="prefetch" href="/blog/assets/js/98.a95f48f1.js"><link rel="prefetch" href="/blog/assets/js/99.325e08a0.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.ed45a4b6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="sanyer" class="logo"> <span class="site-name can-hide">sanyer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue3/" class="nav-link">
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/babel/" class="nav-link">
  babel
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/weex/" class="nav-link">
  weex
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/electron/" class="nav-link">
  electron
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webrtc/" class="nav-link">
  WebRTC
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/websocket/" class="nav-link">
  WebSocket
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/network/" class="nav-link">
  网络知识
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/design/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/algorithm/" class="nav-link">
  数据结构/算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/interview/" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/booklist/" class="nav-link">
  书单
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/article/website/" class="nav-link">
  站点分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/configure/" class="nav-link">
  配置说明
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/android/" class="nav-link">
  Android
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/pm2/" class="nav-link">
  pm2
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/ffmpeg/" class="nav-link">
  ffmpeg
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/python/" class="nav-link router-link-active">
  python
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/golang/" class="nav-link">
  golang
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/c++/" class="nav-link">
  c++
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/wasm/" class="nav-link">
  wasm
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/study/" class="nav-link">
  study
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nextcloud/" class="nav-link">
  nextcloud
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/jetson/" class="nav-link">
  jetson
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/database/" class="nav-link">
  数据库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍系列" class="dropdown-title"><span class="title">书籍系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍系列" class="mobile-dropdown-title"><span class="title">书籍系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/original/webdesign/" class="nav-link">
  《从零开始网页设计》
</a></li><li class="dropdown-item"><!----> <a href="/blog/original/js-definitive/" class="nav-link">
  《JavaScript权威指南 第七版》 笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://sanyers.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人简历
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><span class="title">导航</span> <span class="arrow down"></span></button> <button type="button" aria-label="导航" class="mobile-dropdown-title"><span class="title">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/126bb2363acb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sanyers.github.io/qa-system/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/javascript/" class="nav-link">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue3/" class="nav-link">
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/babel/" class="nav-link">
  babel
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/weex/" class="nav-link">
  weex
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/electron/" class="nav-link">
  electron
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webrtc/" class="nav-link">
  WebRTC
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/websocket/" class="nav-link">
  WebSocket
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/network/" class="nav-link">
  网络知识
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/design/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/algorithm/" class="nav-link">
  数据结构/算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/interview/" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/booklist/" class="nav-link">
  书单
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/article/website/" class="nav-link">
  站点分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/configure/" class="nav-link">
  配置说明
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/android/" class="nav-link">
  Android
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/pm2/" class="nav-link">
  pm2
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/ffmpeg/" class="nav-link">
  ffmpeg
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/python/" class="nav-link router-link-active">
  python
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/golang/" class="nav-link">
  golang
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/c++/" class="nav-link">
  c++
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/wasm/" class="nav-link">
  wasm
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/study/" class="nav-link">
  study
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nextcloud/" class="nav-link">
  nextcloud
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/jetson/" class="nav-link">
  jetson
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/database/" class="nav-link">
  数据库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍系列" class="dropdown-title"><span class="title">书籍系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍系列" class="mobile-dropdown-title"><span class="title">书籍系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/original/webdesign/" class="nav-link">
  《从零开始网页设计》
</a></li><li class="dropdown-item"><!----> <a href="/blog/original/js-definitive/" class="nav-link">
  《JavaScript权威指南 第七版》 笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://sanyers.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人简历
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><span class="title">导航</span> <span class="arrow down"></span></button> <button type="button" aria-label="导航" class="mobile-dropdown-title"><span class="title">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/126bb2363acb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sanyers.github.io/qa-system/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/article/python/" aria-current="page" class="sidebar-link">开始</a></li><li><a href="/blog/article/python/gRPC连接.html" class="sidebar-link">gRPC连接</a></li><li><a href="/blog/article/python/python使用opencv摄像头拍照.html" class="sidebar-link">python使用opencv摄像头拍照</a></li><li><a href="/blog/article/python/python保存图片的三种方式.html" class="sidebar-link">python保存图片的三种方式</a></li><li><a href="/blog/article/python/python操作字符串.html" class="sidebar-link">python操作字符串</a></li><li><a href="/blog/article/python/python数组和字符串互相转换.html" class="sidebar-link">python数组和字符串互相转换</a></li><li><a href="/blog/article/python/python生成随机数.html" class="sidebar-link">python生成随机数</a></li><li><a href="/blog/article/python/python连接mongodb.html" class="sidebar-link">python连接mongodb</a></li><li><a href="/blog/article/python/ubuntu安装python3.10.html" class="sidebar-link">ubuntu安装python3.10</a></li><li><a href="/blog/article/python/使用fastchat转换模型.html" class="sidebar-link">使用fastchat转换模型</a></li><li><a href="/blog/article/python/常见问题.html" class="sidebar-link">常见问题</a></li><li><a href="/blog/article/python/本地部署chatglm.html" class="sidebar-link">本地部署chatglm</a></li><li><a href="/blog/article/python/本地部署minigpt4.html" class="active sidebar-link">本地部署minigpt4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_1、下载代码" class="sidebar-link">1、下载代码</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_2、下载模型" class="sidebar-link">2、下载模型</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_3、下载模型检查点" class="sidebar-link">3、下载模型检查点</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_4、配置环境" class="sidebar-link">4、配置环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_4-1-安装-conda" class="sidebar-link">4.1 安装 conda</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_4-2-创建虚拟环境" class="sidebar-link">4.2 创建虚拟环境</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_4-3-安装pip依赖库" class="sidebar-link">4.3 安装pip依赖库</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_5、添加-swap-虚拟内存" class="sidebar-link">5、添加 swap 虚拟内存</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_6、配置-huggingface-transformers-使用本地模型" class="sidebar-link">6、配置 huggingface transformers 使用本地模型</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_7、配置-bert-base-uncased-模型" class="sidebar-link">7、配置 bert-base-uncased 模型</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_8、启动配置" class="sidebar-link">8、启动配置</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_9、常见问题" class="sidebar-link">9、常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_9-1-gradio-frpc-linux-问题" class="sidebar-link">9.1 gradio frpc_linux 问题</a></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_9-2-bitsandbytes-库报错-libbitsandbytes-cpu-so-undefined-symbol-cget-col-row-stats" class="sidebar-link">9.2 bitsandbytes 库报错：libbitsandbytescpu.so: undefined symbol: cgetcolrowstats</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/python/本地部署minigpt4.html#_10、jeson-orin-nx-运行-minigpt4" class="sidebar-link">10、jeson orin nx 运行 minigpt4</a></li></ul></li><li><a href="/blog/article/python/本地部署NanoOWL.html" class="sidebar-link">本地部署NanoOWL</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="本地部署minigpt4"><a href="#本地部署minigpt4" class="header-anchor">#</a> 本地部署minigpt4</h1> <h2 id="_1、下载代码"><a href="#_1、下载代码" class="header-anchor">#</a> 1、下载代码</h2> <p>代码地址 <a href="https://github.com/Vision-CAIR/MiniGPT-4" target="_blank" rel="noopener noreferrer">MiniGPT-4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2、下载模型"><a href="#_2、下载模型" class="header-anchor">#</a> 2、下载模型</h2> <p><a href="https://huggingface.co/Vision-CAIR/vicuna-7b/tree/main" target="_blank" rel="noopener noreferrer">vicuna-7b<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>配置模型位置，修改配置文件 <code>minigpt4\configs\models\minigpt4_vicuna0.yaml</code>，第 18 行修改 <code>llama_model</code> 地址</p> <h2 id="_3、下载模型检查点"><a href="#_3、下载模型检查点" class="header-anchor">#</a> 3、下载模型检查点</h2> <p><a href="https://drive.google.com/file/d/1RY9jV0dyqLX-o38LrumkKRh6Jtaop58R/view?usp=sharing" target="_blank" rel="noopener noreferrer">vicuna-7b检查点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>配置检查点位置，修改配置文件 <code>\eval_configs\minigpt4_eval.yaml</code>，第 8 行修改 <code>ckpt</code> 地址</p> <h2 id="_4、配置环境"><a href="#_4、配置环境" class="header-anchor">#</a> 4、配置环境</h2> <h3 id="_4-1-安装-conda"><a href="#_4-1-安装-conda" class="header-anchor">#</a> 4.1 安装 conda</h3> <p><code>wget https://mirrors.bfsu.edu.cn/anaconda/archive/Anaconda3-2023.09-0-Linux-x86_64.sh --no-check-certificate</code></p> <h3 id="_4-2-创建虚拟环境"><a href="#_4-2-创建虚拟环境" class="header-anchor">#</a> 4.2 创建虚拟环境</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>conda create <span class="token parameter variable">-n</span> minigpt4 <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.8</span> <span class="token comment"># cuda 11.4 使用 python=3.8</span>
conda activate minigpt4 <span class="token comment"># 进入虚拟环境</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-3-安装pip依赖库"><a href="#_4-3-安装pip依赖库" class="header-anchor">#</a> 4.3 安装pip依赖库</h3> <p>进入虚拟环境后，开始安装pip依赖库</p> <p>创建 requirements.txt 文件，输入如下内容：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>torchaudio
huggingface-hub==0.18.0
matplotlib==3.7.0
psutil==5.9.4
iopath
pyyaml==6.0
regex==2022.10.31
tokenizers==0.13.2
tqdm==4.64.1
transformers==4.30.0
timm==0.6.13
webdataset==0.2.48
omegaconf==2.3.0
opencv-python==4.7.0.72
peft==0.2.0
sentence-transformers
gradio==3.47.1
accelerate==0.20.3
wandb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>输入命令开始安装：<code>pip install -r requirements.txt -i https://mirror.sjtu.edu.cn/pypi/web/simple</code></p> <p>单独安装的库：</p> <ul><li>torch==2.1.0 (arm平台需要单独下载安装)</li> <li>scikit-image</li> <li>visual_genome</li></ul> <p>编译安装的库：</p> <ul><li>torchvision (arm平台需要编译并安装)</li> <li>decord==0.6.0 (arm平台需要编译并安装)</li> <li>bitsandbytes==0.37.0 (arm平台需要安装)</li></ul> <p>安装 decord：（arm orin）</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libjpeg-dev zlib1g-dev libpython3-dev libopenblas-dev libavcodec-dev libavformat-dev libswscale-dev ffmpeg libavfilter-dev libavutil-dev

<span class="token comment"># 下载 decord 编译</span>
<span class="token function">git</span> clone <span class="token parameter variable">--recursive</span> https://github.com/dmlc/decord
<span class="token builtin class-name">cd</span> decord
<span class="token function">mkdir</span> build <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> build
cmake <span class="token punctuation">..</span> <span class="token parameter variable">-DCMAKE_BUILD_TYPE</span><span class="token operator">=</span>Release

<span class="token function">make</span>
<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/python
python3 setup.py <span class="token function">install</span> <span class="token parameter variable">--user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>安装 bitsandbytes：（orin）</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># pip install bitsandbytes orin 系统会报错</span>
<span class="token comment"># git clone https://github.com/timdettmers/bitsandbytes.git #官方链接存在问题无法编译</span>
<span class="token function">git</span> clone https://github.com/g588928812/bitsandbytes_jetsonX
<span class="token builtin class-name">cd</span> bitsandbytes
<span class="token assign-left variable">CUDA_VERSION</span><span class="token operator">=</span><span class="token number">114</span> <span class="token function">make</span> cuda11x  <span class="token comment"># 切少文件解决参见https://blog.csdn.net/xwb_12340/article/details/130268747</span>
<span class="token comment"># pip3 uninstall bitsandbytes #卸载之前安装的错误版本</span>
<span class="token function">sudo</span> python3 setup.py <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>安装 torch：（orin）</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">wget</span> https://developer.download.nvidia.cn/compute/redist/jp/v512/pytorch/torch-2.1.0a0+41361538.nv23.06-cp38-cp38-linux_aarch64.whl
pip3 <span class="token function">install</span> torch-2.1.0a0+41361538.nv23.06-cp38-cp38-linux_aarch64.whl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>安装 torchvision：（orin）</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">git</span> clone <span class="token parameter variable">-b</span> v0.16.0 https://github.com/pytorch/vision torchvision
cmake <span class="token punctuation">..</span>
<span class="token function">make</span>
python3 setup.py <span class="token function">install</span> <span class="token parameter variable">--user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_5、添加-swap-虚拟内存"><a href="#_5、添加-swap-虚拟内存" class="header-anchor">#</a> 5、添加 swap 虚拟内存</h2> <p>如果内存不足可以添加 swap 虚拟内存</p> <p>方法一：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 创建 swap 分区</span>
<span class="token function">mkdir</span> /swap
<span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>/swap/swapfile <span class="token assign-left variable">bs</span><span class="token operator">=</span>1M <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1024</span>

<span class="token function">mkswap</span> /swap/swapfile  <span class="token comment"># 建立swap的文件系统</span>
<span class="token function">chmod</span> <span class="token number">600</span> /swap/swapfile  <span class="token comment"># 修改权限</span>

<span class="token function">swapon</span> /swap/swapfile  <span class="token comment">#启用swap文件</span>

<span class="token comment"># 使系统开机时自启用，在文件/etc/fstab中添加一行</span>
/swap/swapfile swap swap defaults <span class="token number">0</span> <span class="token number">0</span>

<span class="token comment"># 查看当前交换分区路径</span>
<span class="token function">swapon</span> <span class="token parameter variable">-s</span>

<span class="token comment">#查看当前内存使用情况</span>
<span class="token function">free</span> <span class="token parameter variable">-mt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>方法二：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 1、以root身份进入控制台（登录系统），停止所有的swap分区</span>
swapoff <span class="token parameter variable">-a</span>

<span class="token comment"># 2、对新添加磁盘进行分区 用fdisk命令（例：# fdisk /dev/sdb）对磁盘进行分区，添加swap分区，新建分区，在fdisk中用“t”命令将新添的分区id改为82（Linux swap类型），最后用w将操作实际写入硬盘（没用w之前的操作是无效的）。</span>

<span class="token comment"># 3、格式化swap分区 这里的sdb2要看您加完后p命令显示的实际分区设备名</span>
<span class="token function">mkswap</span> /dev/sdb2

<span class="token comment"># 4、启动新的swap分区</span>
<span class="token function">swapon</span> /dev/sdb2

<span class="token comment"># 5、为了让系统启动时能自动启用这个交换分区，可以编辑/etc/fstab,加入下面一行</span>
/dev/sdb2 swap swap defaults <span class="token number">0</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_6、配置-huggingface-transformers-使用本地模型"><a href="#_6、配置-huggingface-transformers-使用本地模型" class="header-anchor">#</a> 6、配置 huggingface transformers 使用本地模型</h2> <p>设置环境变量</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">HF_DATASETS_OFFLINE</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">TRANSFORMERS_OFFLINE</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>修改模型的 <code>config.json</code> 文件 <code>_name_or_path</code> 地址改为模型地址</p> <h2 id="_7、配置-bert-base-uncased-模型"><a href="#_7、配置-bert-base-uncased-模型" class="header-anchor">#</a> 7、配置 bert-base-uncased 模型</h2> <p><code>git clone https://huggingface.co/bert-base-uncased/tree/main</code></p> <p>修改文件 <code>\minigpt4\models\minigpt4.py</code> 第 89 行：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>encoder_config = BertConfig.from_pretrained(&quot;bert-base-uncased&quot;) # 改为本地 bert-base-uncased 模型地址
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_8、启动配置"><a href="#_8、启动配置" class="header-anchor">#</a> 8、启动配置</h2> <p>修改 <code>demo.py</code> 文件：</p> <p><code>demo.launch(server_name='0.0.0.0', share=True, enable_queue=True)</code></p> <p>启动之前可以查看运行状态：<code>jtop</code></p> <p>启动命令：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 对于 MiniGPT-v2，运行</span>
python demo_v2.py --cfg-path eval_configs/minigptv2_eval.yaml  --gpu-id <span class="token number">0</span>

<span class="token comment"># 对于 MiniGPT-4（Vicuna 版本），运行</span>
python demo.py --cfg-path eval_configs/minigpt4_eval.yaml  --gpu-id <span class="token number">0</span>

<span class="token comment"># 对于 MiniGPT-4（Llama2 版本），运行</span>
python demo.py --cfg-path eval_configs/minigpt4_llama2_eval.yaml  --gpu-id <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>运行后提示 <code>Running on local URL: http://0.0.0.0:7860</code> 表示已成功启动</p> <h2 id="_9、常见问题"><a href="#_9、常见问题" class="header-anchor">#</a> 9、常见问题</h2> <h3 id="_9-1-gradio-frpc-linux-问题"><a href="#_9-1-gradio-frpc-linux-问题" class="header-anchor">#</a> 9.1 gradio frpc_linux 问题</h3> <p>提示如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Could not create share link. Missing file: /home/vvt/anaconda3/envs/minigpt4/lib/python3.8/site-packages/gradio/frpc_linux_aarch64_v0.2. 

Please check your internet connection. This can happen if your antivirus software blocks the download of this file. You can install manually by following these steps: 

1. Download this file: https://cdn-media.huggingface.co/frpc-gradio-0.2/frpc_linux_aarch64
2. Rename the downloaded file to: frpc_linux_aarch64_v0.2
3. Move the file to this location: /home/xxx/anaconda3/envs/minigpt4/lib/python3.8/site-packages/gradio
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>下载文件 <code>https://github.com/lvyufeng/frpc-gradio</code> <code>frpc_linux_arm64</code> 重命名为 <code>frpc_linux_aarch64_v0.2</code>，并复制到目录</p> <h3 id="_9-2-bitsandbytes-库报错-libbitsandbytes-cpu-so-undefined-symbol-cget-col-row-stats"><a href="#_9-2-bitsandbytes-库报错-libbitsandbytes-cpu-so-undefined-symbol-cget-col-row-stats" class="header-anchor">#</a> 9.2 bitsandbytes 库报错：libbitsandbytes_cpu.so: undefined symbol: cget_col_row_stats</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>AttributeError: /xxx/.conda/envs/luxuntest/lib/python3.8/site-packages/bitsandbytes/libbitsandbytes_cpu.so: undefined symbol: cget_col_row_stats
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将 libbitsandbytes_cpu.so 替换成 GPU 的 so</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd /home/xxx/.conda/envs/xxx/lib/python3.x/site-packages/bitsandbytes
cp libbitsandbytes_cuda1xx.so libbitsandbytes_cpu.so
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>具体使用哪个版本的 _cudaxxx.so 根据 torch_gpu 对应的 cuda 版本而定</p> <h2 id="_10、jeson-orin-nx-运行-minigpt4"><a href="#_10、jeson-orin-nx-运行-minigpt4" class="header-anchor">#</a> 10、jeson orin nx 运行 minigpt4</h2> <p><a href="https://www.jetson-ai-lab.com/tutorial_minigpt4.html" target="_blank" rel="noopener noreferrer">参考地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>运行命令：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 1、下载 jetson-containers 代码</span>
<span class="token function">git</span> clone https://github.com/dusty-nv/jetson-containers
<span class="token builtin class-name">cd</span> jetson-containers
<span class="token function">sudo</span> <span class="token function">apt</span> update<span class="token punctuation">;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> python3-pip
pip3 <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt

<span class="token comment"># 2、设置可执行文件</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> +x autotag
<span class="token function">sudo</span> <span class="token function">chmod</span> +x run.sh

<span class="token comment"># 3、复制大模型文件到 data 目录</span>
./data/models/huggingface/datasets--maknee--ggml-vicuna-v0-quantized/snapshots/1d8789f34eb803bf52daf895c7ecfd2559cf5ccc/ggml-vicuna-7B-v0-q5_k.bin
./data/models/huggingface/datasets--maknee--minigpt4-7b-ggml/snapshots/79340163b5a9a37908610cc71a7e1dd3c7f77889/minigpt4-7B-f16.bin

<span class="token comment"># 4、运行</span>
<span class="token comment"># 加载指定模型</span>
./run.sh dustynv/minigpt4:r35.4.1 /bin/bash <span class="token parameter variable">-c</span> <span class="token string">'cd /opt/minigpt4.cpp/minigpt4 &amp;&amp; python3 webui.py $(huggingface-downloader --type=dataset maknee/minigpt4-7b-ggml/minigpt4-7B-f16.bin) $(huggingface-downloader --type=dataset maknee/ggml-vicuna-v0-quantized/ggml-vicuna-7B-v0-q5_k.bin)'</span>
<span class="token comment"># 或</span>
./run.sh <span class="token variable"><span class="token variable">$(</span>./autotag minigpt4<span class="token variable">)</span></span> /bin/bash <span class="token parameter variable">-c</span> <span class="token string">'cd /opt/minigpt4.cpp/minigpt4 &amp;&amp; python3 webui.py $(huggingface-downloader --type=dataset maknee/minigpt4-7b-ggml/minigpt4-7B-f16.bin) $(huggingface-downloader --type=dataset maknee/ggml-vicuna-v0-quantized/ggml-vicuna-7B-v0-q5_k.bin)'</span><span class="token function">docker</span>

<span class="token comment"># 5、提示 huggingface 连接失败，可以使用科学上网，提示 ggml-vicuna-7B-v0-q5_k.bin 等数据集下载失败，可以修原始 docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>修改原始 docker</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 进入原生镜像并创建一个新的容器，修改里面的 /usr/local/bin/_huggingface-downloader.py 文件</span>
<span class="token function">sudo</span> <span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--entrypoint</span> /bin/bash dustynv/minigptr：35.4.1
<span class="token comment"># root@cf8d8bb1bb76 @ 后面就是新容器id</span>
<span class="token comment"># 新容器可能需要安装vim</span>
<span class="token function">apt</span> update
<span class="token function">apt</span> <span class="token function">install</span> <span class="token function">vim</span>
<span class="token function">vim</span> /usr/local/bin/_huggingface-downloader.py

<span class="token comment"># 第 56 行 repo_path = hf_hub_download 修改为：</span>
<span class="token keyword">if</span> filename <span class="token operator">==</span> <span class="token string">'minigpt4-7B-f16.bin'</span><span class="token builtin class-name">:</span>
    repo_path <span class="token operator">=</span> <span class="token string">'/data/models/huggingface/datasets--maknee--minigpt4-7b-ggml/snapshots/79340163b5a9a37908610cc71a7e1dd3c7f77889/minigpt4-7B-f16.bin'</span>
else:
    repo_path <span class="token operator">=</span> <span class="token string">'/data/models/huggingface/datasets--maknee--ggml-vicuna-v0-quantized/snapshots/1d8789f34eb803bf52daf895c7ecfd2559cf5ccc/ggml-vicuna-7B-v0-q5_k.bin'</span>

<span class="token comment"># 将容器保存为镜像</span>
<span class="token function">sudo</span> <span class="token function">docker</span> commit cf8d8bb1bb76<span class="token punctuation">(</span>容器id<span class="token punctuation">)</span> dustynv/minigpt4:r35.4.3<span class="token punctuation">(</span>新镜像名称:tag<span class="token punctuation">)</span>
<span class="token function">sudo</span> <span class="token function">docker</span> images
<span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><a href="https://github.com/dusty-nv/jetson-containers/tree/master/packages/llm/minigpt4" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">11/9/2023, 7:04:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/article/python/本地部署chatglm.html" class="prev">
        本地部署chatglm
      </a></span> <span class="next"><a href="/blog/article/python/本地部署NanoOWL.html">
        本地部署NanoOWL
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.5b16b95b.js" defer></script><script src="/blog/assets/js/2.ce51b73f.js" defer></script><script src="/blog/assets/js/116.3b112a11.js" defer></script>
  </body>
</html>
