(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{347:function(t,s,a){"use strict";a.r(s);var e=a(10),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"linux-磁盘管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-磁盘管理"}},[t._v("#")]),t._v(" linux 磁盘管理")]),t._v(" "),s("h2",{attrs:{id:"_1、磁盘命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、磁盘命令"}},[t._v("#")]),t._v(" 1、磁盘命令")]),t._v(" "),s("h3",{attrs:{id:"_1-1-df-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-df-命令"}},[t._v("#")]),t._v(" 1.1 df 命令")]),t._v(" "),s("p",[t._v("disk free 列出文件系统的整体磁盘使用量")]),t._v(" "),s("p",[s("code",[t._v("df [-ahikHTm] [目录或文件名]")])]),t._v(" "),s("p",[t._v("选项与参数：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-a")]),t._v(" ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；")]),t._v(" "),s("li",[s("code",[t._v("-k")]),t._v(" ：以 KBytes 的容量显示各文件系统；")]),t._v(" "),s("li",[s("code",[t._v("-m")]),t._v(" ：以 MBytes 的容量显示各文件系统；")]),t._v(" "),s("li",[s("code",[t._v("-h")]),t._v(" ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；")]),t._v(" "),s("li",[s("code",[t._v("-H")]),t._v(" ：以 M=1000K 取代 M=1024K 的进位方式；")]),t._v(" "),s("li",[s("code",[t._v("-T")]),t._v(" ：显示文件系统类型, 连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；")]),t._v(" "),s("li",[s("code",[t._v("-i")]),t._v(" ：不用硬盘容量，而以 inode 的数量来显示")])]),t._v(" "),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v("\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v("\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-T")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h3",{attrs:{id:"_1-2-du-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-du-命令"}},[t._v("#")]),t._v(" 1.2 du 命令")]),t._v(" "),s("p",[t._v("disk used 检查磁盘空间使用量，包括隐藏文件夹")]),t._v(" "),s("p",[s("code",[t._v("du [-ahskm] 文件或目录名称")])]),t._v(" "),s("p",[t._v("选项与参数：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-a")]),t._v(" ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。")]),t._v(" "),s("li",[s("code",[t._v("-h")]),t._v(" ：以人们较易读的容量格式 (G/M) 显示；")]),t._v(" "),s("li",[s("code",[t._v("-s")]),t._v(" ：列出总量而已，而不列出每个各别的目录占用容量；")]),t._v(" "),s("li",[s("code",[t._v("-S")]),t._v(" ：不包括子目录下的总计，与 -s 有点差别。")]),t._v(" "),s("li",[s("code",[t._v("-k")]),t._v(" ：以 KBytes 列出容量显示；")]),t._v(" "),s("li",[s("code",[t._v("-m")]),t._v(" ：以 MBytes 列出容量显示；")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出根目录下所有文件夹磁盘占用大小")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("du")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sh")]),t._v(" /*\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出指定目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("du")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sh")]),t._v(" /home/*\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("du")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sh")]),t._v(" /usr/*\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"_1-3-fdisk-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-fdisk-命令"}},[t._v("#")]),t._v(" 1.3 fdisk 命令")]),t._v(" "),s("p",[t._v("用于磁盘分区")]),t._v(" "),s("p",[s("code",[t._v("fdisk [-l] 装置名称")])]),t._v(" "),s("p",[t._v("选项与参数：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-l")]),t._v(" ：输出后面接的装置所有的分区内容。若仅有 fdisk -l 时， 则系统将会把整个系统内能够搜寻到的装置的分区均列出来。")])]),t._v(" "),s("h3",{attrs:{id:"_1-4-其他指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-其他指令"}},[t._v("#")]),t._v(" 1.4 其他指令")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# mount | column -t      # 查看挂接的分区状态\n# fdisk -l               # 查看所有分区\n# swapon -s              # 查看所有交换分区\n# hdparm -i /dev/hda     # 查看磁盘参数(仅适用于IDE设备)\n# dmesg | grep IDE       # 查看启动时IDE设备检测状况\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("https://zhuanlan.zhihu.com/p/234986013")]),t._v(" "),s("h2",{attrs:{id:"_2、磁盘挂载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、磁盘挂载"}},[t._v("#")]),t._v(" 2、磁盘挂载")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 临时挂载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" ext4 /dev/sda /raid_backup/\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开机自动挂载，在最后一行加上挂载的相关信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/fstab\n\n/dev/sdc       /raid_backup  ext4 defaults "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载设备      挂载位置        文件系统 默认")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载 swap 虚拟内存")]),t._v("\n/swap/swapfile swap swap defaults "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 验证挂载，也可以重启后查看挂载情况")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h2",{attrs:{id:"_3、lsblk-查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、lsblk-查询"}},[t._v("#")]),t._v(" 3、lsblk 查询")]),t._v(" "),s("p",[t._v("lsblk 命令的英文是“list block”，即用于列出所有可用块设备的信息，而且还能显示他们之间的依赖关系，但是它不会列出 RAM 盘的信息。块设备有硬盘，闪存盘，CD-ROM 等等。lsblk 命令包含 util-linux 中。")]),t._v(" "),s("p",[t._v("参数说明：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-a, --all")]),t._v(" 打印所有设备")]),t._v(" "),s("li",[s("code",[t._v("-b, --bytes")]),t._v(" 以字节格式打印大小")]),t._v(" "),s("li",[s("code",[t._v("-d, --nodeps")]),t._v(" 不打印从属或持有者")]),t._v(" "),s("li",[s("code",[t._v("-D, --discard")]),t._v(" 打印遗弃功能列表")]),t._v(" "),s("li",[s("code",[t._v("-e, --exclude <list>")]),t._v(" 按主要编号排除设备")]),t._v(" "),s("li",[s("code",[t._v("-I, --include <list>")]),t._v(" 仅显示具有指定主要编号的设备")]),t._v(" "),s("li",[s("code",[t._v("-f, --fs")]),t._v(" 输出有关文件系统的信息")]),t._v(" "),s("li",[s("code",[t._v("-i, --ascii")]),t._v(" 仅使用 ascii 字符")]),t._v(" "),s("li",[s("code",[t._v("-m, --perms")]),t._v(" 输出有关权限的信息")]),t._v(" "),s("li",[s("code",[t._v("-l, --list")]),t._v(" 使用列表格式输出")]),t._v(" "),s("li",[s("code",[t._v("-n, --noheadings")]),t._v(" 不打印标题")]),t._v(" "),s("li",[s("code",[t._v("-o, --output")]),t._v(" 输出信息列")]),t._v(" "),s("li",[s("code",[t._v("-p, --paths")]),t._v(" 打印平面设备路径")]),t._v(" "),s("li",[s("code",[t._v("-P, --pairs")]),t._v(" 使用 "),s("code",[t._v('key="value"')]),t._v(" 输出格式")]),t._v(" "),s("li",[s("code",[t._v("-r, --raw")]),t._v(" 使用原始输出格式")]),t._v(" "),s("li",[s("code",[t._v("-s, --inverse")]),t._v(" 反向依赖")]),t._v(" "),s("li",[s("code",[t._v("-t, --topology")]),t._v(" 输出有关拓扑的信息")]),t._v(" "),s("li",[s("code",[t._v("-S, --scsi")]),t._v(" 输出有关 scsi 设备的信息")]),t._v(" "),s("li",[s("code",[t._v("-h, --help")]),t._v(" 显示帮助信息")]),t._v(" "),s("li",[s("code",[t._v("-V, --version")]),t._v(" 显示版本信息")])]),t._v(" "),s("p",[t._v("输出信息列：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("列名称")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("列说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("NAME")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备名称")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("KNAME")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("内部内核设备名称")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("MAJ:MIN")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("主要和次要设备数量")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("FSTYPE")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("文件系统类型")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("MOUNTPOINT")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备挂载点")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("LABEL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("文件系统标签")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("UUID")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("UUID")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("PARTLABEL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("分区标签")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("PARTUUID")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("分区的 UUID")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("RA")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("预读设备")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("RO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("只读设备")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("RM")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("可移动设备")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("MODEL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备标识符")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("SERIAL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("磁盘序列号")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("SIZE")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("OWNER")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("所有者用户名")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("GROUP")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("组名")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("MODE")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备节点权限")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("MIN-IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("最小 I/O 大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("OPT-IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("最佳 I/O 大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("PHY-SEC")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("物理扇区大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("LOG-SEC")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("逻辑扇区大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("ROTA")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("旋转装置")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("SCHED")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("I/O 计划程序名称")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("RQ-SIZE")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("请求队列大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("TYPE")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备类型")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("DISC-ALN")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("废弃的校准偏移盘")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("DISC-GRAN")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("废弃的颗粒度")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("DISC-MAX")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("废弃的最大字节数")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("DISC-ZERO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("废弃的零数据")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("WSAME")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("写入相同的最大字节数")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("WWN")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("唯一存储标识")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("RAND")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("添加了随机性")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("PKNAME")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("内部父内核设备名称")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("HCTL")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("SCSI 编号")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("TRAN")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备传输类型")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("REV")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备版本")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("VENDOR")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("设备供应商")])])])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" lsblk "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出所有设备")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" lsblk "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看指定块设备信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" lsblk /dev/sda1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看块设备的文件系统类型及UUID")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" lsblk "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看块设备的完整路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" lsblk "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出所有设备指定列信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" lsblk "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-J")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-M")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NAME,SIZE,PTTYPE,PARTLABEL,FSTYPE,MOUNTPOINT"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("h2",{attrs:{id:"_4、parted-分区"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、parted-分区"}},[t._v("#")]),t._v(" 4、parted 分区")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parted")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-h")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parted")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("DEVICE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("COMMAND "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("PARAMETERS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nOPTIONs:\n  -h, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示帮助消息")]),t._v("\n  -l, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--list")]),t._v("                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出所有块设备上的分区布局")]),t._v("\n  -m, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--machine")]),t._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示机器可解析的输出")]),t._v("\n  -s, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--script")]),t._v("                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 不给用户输出提示信息（非交互式，脚本）")]),t._v("\n  -v, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--version")]),t._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 版本信息")]),t._v("\n  -a, "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--align")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("none"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("cyl"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新分区的对齐")]),t._v("\n\nCOMMANDs:\n  align-check TYPE N                       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# check partition N for TYPE(min|opt)")]),t._v("\n        alignment\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("COMMAND"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# print general help, or help on")]),t._v("\n        COMMAND\n  mklabel,mktable LABEL-TYPE               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建一个新的磁盘标签（分区表）")]),t._v("\n  mkpart PART-TYPE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("FS-TYPE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" START END     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建分区")]),t._v("\n  name NUMBER NAME                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name partition NUMBER as NAME")]),t._v("\n  print "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("devices"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("list,all"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("NUMBER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示分区表、可用设备、可用空间、所有找到的分区或特定分区")]),t._v("\n  quit                                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# exit program")]),t._v("\n  rescue START END                         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rescue a lost partition near START")]),t._v("\n        and END\n  resizepart NUMBER END                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 调整分区大小")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" NUMBER                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除分区")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" DEVICE                            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# choose the device to edit")]),t._v("\n  disk_set FLAG STATE                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# change the FLAG on selected device")]),t._v("\n  disk_toggle "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("FLAG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("                       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# toggle the state of FLAG on selected")]),t._v("\n        device\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" NUMBER FLAG STATE                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# change the FLAG on partition NUMBER")]),t._v("\n  toggle "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("NUMBER "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("FLAG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# toggle the state of FLAG on partition")]),t._v("\n        NUMBER\n  unit UNIT                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set the default unit to UNIT")]),t._v("\n  version                                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# display the version number and")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br")])]),s("p",[t._v("操作示例：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置磁盘格式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parted")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /dev/sda mklabel gpt\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建分区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parted")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /dev/sda mkpart primary "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${start}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${end}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要设置单位，例如 1024B")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 格式化分区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkfs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" ext4 /dev/sda1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建挂载目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" mdkir /data/sda1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载分区（临时挂载）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" /dav/sda1 /data/sda1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载分区（永久挂载）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UUID='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${uuid}")]),t._v(' /data/sda1 ext4 defaults 0 0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/fstab\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消挂载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" /"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${uuid}")]),t._v("/d /etc/fstab\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" /dav/sda1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除分区（前提需要取消挂载）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parted")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /dav/sda "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br")])]),s("h2",{attrs:{id:"_5、mkfs-磁盘格式化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、mkfs-磁盘格式化"}},[t._v("#")]),t._v(" 5、mkfs 磁盘格式化")]),t._v(" "),s("p",[t._v("磁盘分区完毕后要进行文件系统的格式化，也就是创建文件系统")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("mkts "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("格式化名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("设备名称"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或")]),t._v("\nmkts."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("格式化名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("设备名称"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("格式列表："),s("code",[t._v("ext4、ntfs、fat、vfat、xfs")])]),t._v(" "),s("p",[t._v("相关参数：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-b")]),t._v(" 后面接的是区块容量，范围是 512B-64K。不过 Linux 最大为 4K")]),t._v(" "),s("li",[s("code",[t._v("-d")]),t._v(" 后面接的是 data section(数据区)的相关参数值")]),t._v(" "),s("li",[s("code",[t._v("-f")]),t._v(" 如果设备内已经有了文件系统，则需要使用 "),s("code",[t._v("-f")]),t._v(" 强制格式化")]),t._v(" "),s("li",[s("code",[t._v("-i")]),t._v(" 与 inode 有较相关的设置")]),t._v(" "),s("li",[s("code",[t._v("-L")]),t._v(" 后面接这个文件系统的标头名称 Label name")]),t._v(" "),s("li",[s("code",[t._v("-r")]),t._v(" 指定 realtime section(实时运行区)的相关设置值")])]),t._v(" "),s("h2",{attrs:{id:"_6、mdadm-软-raid-管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、mdadm-软-raid-管理"}},[t._v("#")]),t._v(" 6、mdadm 软 RAID 管理")]),t._v(" "),s("p",[t._v("mdadm 是 linux 下用于创建和管理软件 RAID 的命令，是一个模式化命令。但由于现在服务器一般都带有 RAID 阵列卡，并且 RAID 阵列卡也很廉价，且由于软件 RAID 的自身缺陷（不能用作启动分区、使用 CPU 实现，降低 CPU 利用率），因此在生产环境下并不适用。")]),t._v(" "),s("h3",{attrs:{id:"_6-1-创建模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-创建模式"}},[t._v("#")]),t._v(" 6.1 创建模式")]),t._v(" "),s("p",[t._v("选项：-C")]),t._v(" "),s("p",[t._v("专用选项：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-l")]),t._v(" 级别")]),t._v(" "),s("li",[s("code",[t._v("-n")]),t._v(" 设备个数")]),t._v(" "),s("li",[s("code",[t._v("-a")]),t._v(" {yes|no} 自动为其创建设备文件")]),t._v(" "),s("li",[s("code",[t._v("-c")]),t._v(" 指定数据块大小（chunk）")]),t._v(" "),s("li",[s("code",[t._v("-x")]),t._v(" 指定空闲盘（热备磁盘）个数，空闲盘（热备磁盘）能在工作盘损坏后自动顶替")])]),t._v(" "),s("p",[t._v("注意：创建阵列时，阵列所需磁盘数为 -n 参数和 -x 参数的个数和")]),t._v(" "),s("p",[t._v("创建 RAID：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建 RAID 0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" /dev/md0 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" /dev/sdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1,2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建 RAID 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" /dev/md1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" /dev/sdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1,2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建 RAID 5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" /dev/md5 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" /dev/sdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1,2")]),t._v(",3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建 RAID 10")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-C")]),t._v(" /dev/md10 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" /dev/sdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1,2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-x")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" /dev/sdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3,4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保存 RAID")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--detail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--scan")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" /etc/mdadm/mdadm.conf\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新存储设备")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" update-initramfs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("p",[t._v("创建 raid 之后，使用磁盘格式化及挂载即可使用")]),t._v(" "),s("h3",{attrs:{id:"_6-2-管理模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-管理模式"}},[t._v("#")]),t._v(" 6.2 管理模式")]),t._v(" "),s("p",[t._v("选项：-a(--add)，-d(--del),-r(--remove),-f(--fail)")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模拟损坏")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" /dev/md1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" /dev/sdb5\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 移除损坏的磁盘")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" /dev/md1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" /dev/sdb5\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加新的硬盘到已有阵列")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" /dev/md1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" /dev/sdb7\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止阵列")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-S")]),t._v(" /dev/md1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("ul",[s("li",[t._v("新增加的硬盘需要与原硬盘大小一致")]),t._v(" "),s("li",[t._v("如果原有阵列缺少工作磁盘（如raid1只有一块在工作，raid5只有2块在工作），这时新增加的磁盘直接变为工作磁盘，如果原有阵列工作正常，则新增加的磁盘为热备磁盘。")])]),t._v(" "),s("h3",{attrs:{id:"_6-3-监控模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-监控模式"}},[t._v("#")]),t._v(" 6.3 监控模式")]),t._v(" "),s("h3",{attrs:{id:"_6-4-增长模式-用于增加磁盘-为阵列扩容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-增长模式-用于增加磁盘-为阵列扩容"}},[t._v("#")]),t._v(" 6.4 增长模式，用于增加磁盘，为阵列扩容")]),t._v(" "),s("p",[t._v("选项：-G")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将上述raid5的热备磁盘增加到阵列工作磁盘中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-G")]),t._v(" /dev/md2  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -n 4 表示使用四块工作磁盘")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v(" /dev/md2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h3",{attrs:{id:"_6-5-装配模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-装配模式"}},[t._v("#")]),t._v(" 6.5 装配模式")]),t._v(" "),s("p",[t._v("选项：-A")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将上述已经停止的阵列重新装配")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-A")]),t._v(" /dev/md1 /dev/sdb5 /dev/sdb6\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自动装配")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mdadm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Ds")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/etc/mdadm.conf\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("https://www.cnblogs.com/lpfuture/p/6385657.html")]),t._v(" "),s("p",[t._v("https://www.cnblogs.com/37yan/p/7489597.html")]),t._v(" "),s("p",[t._v("https://www.cnblogs.com/asker009/p/10278536.html")]),t._v(" "),s("p",[t._v("https://cloud.tencent.com/developer/article/1346533")])])}),[],!1,null,null,null);s.default=n.exports}}]);