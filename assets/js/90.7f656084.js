(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{376:function(s,a,t){"use strict";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"nextcloud常用指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nextcloud常用指令"}},[s._v("#")]),s._v(" nextcloud常用指令")]),s._v(" "),a("h2",{attrs:{id:"_1、设置目录权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、设置目录权限"}},[s._v("#")]),s._v(" 1、设置目录权限")]),s._v(" "),a("p",[a("code",[s._v("sudo chown -R www-data: /home/html/nextcloud")])]),s._v(" "),a("h2",{attrs:{id:"_2、查看-nextcloud-状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、查看-nextcloud-状态"}},[s._v("#")]),s._v(" 2、查看 nextcloud 状态")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x occ\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" www-data ./occ status\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_3、设置上传文件限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、设置上传文件限制"}},[s._v("#")]),s._v(" 3、设置上传文件限制")]),s._v(" "),a("p",[a("code",[s._v("sudo -u www-data php ./occ config:app:set files max_chunk_size --value 20971520")])]),s._v(" "),a("h2",{attrs:{id:"_4、扫描用户文件并更新-数据迁移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、扫描用户文件并更新-数据迁移"}},[s._v("#")]),s._v(" 4、扫描用户文件并更新（数据迁移）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" www-data php ./occ files:scan "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新所有用户的所有文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" www-data php ./occ files:scan "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--all")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新指定用户ID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" www-data php ./occ files:scan sanyer\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新指定用户的指定目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" www-data php ./occ files:scan "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/sanyer/files/Music"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"_5、外部存储设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、外部存储设置"}},[s._v("#")]),s._v(" 5、外部存储设置")]),s._v(" "),a("p",[s._v("1、启用插件 "),a("code",[s._v("apps")]),s._v(" -> "),a("code",[s._v("External storage support")])]),s._v(" "),a("p",[s._v("2、设置Nextcloud所有用户都能使用外部存储")]),s._v(" "),a("p",[s._v('此时进入外部存储会提示 “smbclient” 未安装。无法挂载 "SMB/CIFS", "使用 OC 登录的 SMB/CIFS"，虽然不一定用到可以安装一下包解决这个提示')]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" nextcloud "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" smbclient libsmbclient-dev\npecl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" smbclient\ndocker-php-ext-enable smbclient\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nfs-kernel-server cifs-utils nfs-common\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("用于管理外部存储的命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("files_external\n files_external:applicable  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理装载的适用用户和组")]),s._v("\n files_external:backends    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示可用的身份验证和存储后端")]),s._v("\n files_external:config      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理装载的后端配置")]),s._v("\n files_external:create      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建新的装载配置")]),s._v("\n files_external:delete      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除外部装载")]),s._v("\n files_external:export      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导出装载配置")]),s._v("\n files_external:import      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导入装载配置")]),s._v("\n files_external:list        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出配置的装载")]),s._v("\n files_external:option      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 管理装载的装载选项")]),s._v("\n files_external:verify      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证装载配置")]),s._v("\n files_external:notify      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 侦听已配置外部装载的活动更新通知")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看命令的帮助")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" www-data php ./occ files_external:create "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);