(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{319:function(n,s,e){"use strict";e.r(s);var a=e(10),t=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"nginx-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-部署"}},[n._v("#")]),n._v(" nginx 部署")]),n._v(" "),s("h2",{attrs:{id:"_1、windows环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、windows环境"}},[n._v("#")]),n._v(" 1、Windows环境")]),n._v(" "),s("p",[n._v("（1）安装")]),n._v(" "),s("p",[n._v("下载地址："),s("code",[n._v("http://nginx.org/en/download.html")])]),n._v(" "),s("p",[n._v("（2）运行")]),n._v(" "),s("p",[n._v("将下载的.zip文件解压到 D:/")]),n._v(" "),s("p",[n._v("打开命令行定位目录到 "),s("code",[n._v("D:\\nginx-1.22.0")])]),n._v(" "),s("p",[n._v("然后执行启动命令 "),s("code",[n._v("start nginx.exe")])]),n._v(" "),s("p",[n._v("（3）nginx 常用命令")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("nginx -s stop   //停止nginx\nnginx -s reload //重新加载nginx\nnginx -s quit   //退出nginx\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("h2",{attrs:{id:"_2、linux安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、linux安装"}},[n._v("#")]),n._v(" 2、linux安装")]),n._v(" "),s("h3",{attrs:{id:"_2-1-centos6安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-centos6安装"}},[n._v("#")]),n._v(" 2.1 centos6安装")]),n._v(" "),s("p",[n._v("1、配置yum 的nginx源")]),n._v(" "),s("p",[n._v("vi /etc/yum.repos.d/nginx.repo")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/6/$basearch/\ngpgcheck=0\nenabled=1\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[n._v("2、yum安装")]),n._v(" "),s("p",[n._v("yum install nginx")]),n._v(" "),s("p",[n._v("3、启动nginx服务")]),n._v(" "),s("p",[n._v("service nginx start")]),n._v(" "),s("p",[n._v("4、修改nginx默认配置")]),n._v(" "),s("p",[n._v("vi /etc/nginx/conf.d/default.conf")]),n._v(" "),s("p",[n._v("nginx -t // 检查nginx配置文件")]),n._v(" "),s("p",[n._v("nginx -s reload")]),n._v(" "),s("h3",{attrs:{id:"_2-2-centos7安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-centos7安装"}},[n._v("#")]),n._v(" 2.2 centos7安装")]),n._v(" "),s("p",[n._v("1、添加源")]),n._v(" "),s("p",[n._v("sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm")]),n._v(" "),s("p",[n._v("2、安装Nginx")]),n._v(" "),s("p",[n._v("sudo yum install -y nginx")]),n._v(" "),s("p",[n._v("3、开启自动启动")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("sudo systemctl start nginx.service\nsudo systemctl enable nginx.service\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("p",[n._v("4、关于centos7不能启动nginx，例如：重启Nginx出现bind() to 0.0.0.0:8090 failed (13: Permission denied)")]),n._v(" "),s("p",[n._v("查看http允许访问的端口")]),n._v(" "),s("p",[s("code",[n._v("semanage port -l | grep http_port_t")])]),n._v(" "),s("p",[n._v("添加要启动的端口")]),n._v(" "),s("p",[s("code",[n._v("semanage port -a -t http_port_t -p tcp 8090")])]),n._v(" "),s("p",[n._v("5、安装semanage")]),n._v(" "),s("p",[s("code",[n._v("yum install -y semanage")])]),n._v(" "),s("p",[n._v("如提示 No package semanage available.")]),n._v(" "),s("p",[n._v("改用 yum provides semanage")]),n._v(" "),s("p",[n._v("出现提示")]),n._v(" "),s("p",[n._v("policycoreutils-python-2.5-33.el7.x86_64 : SELinux policy core python utilities")]),n._v(" "),s("p",[n._v("Repo : base")]),n._v(" "),s("p",[n._v("Matched from:")]),n._v(" "),s("p",[n._v("Filename : /usr/sbin/semanage")]),n._v(" "),s("p",[n._v("执行 yum install -y policycoreutils-python.x86_64")]),n._v(" "),s("p",[n._v("6、关闭SELinx，如果需要代理websocket，可能会拦截")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("临时关闭\nsetenforce 0 \n永久关闭\nvi /etc/selinux/config\n将SELINUX=enforcing改为SELINUX=disabled 设置后需要重启才能生效\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[n._v('7、出现nginx: [error] open() "/var/run/nginx.pid" failed (2: No such file or directory)')]),n._v(" "),s("p",[n._v("sudo nginx -c /etc/nginx/nginx.conf")])])}),[],!1,null,null,null);s.default=t.exports}}]);