<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM 扩展 | sanyer</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/favicon.ico">
    <link rel="stylesheet" href="/blog/css/index.css">
    <script src="/blog/js/index.js"></script>
    <meta name="description" content="This is sanyer&#39;s blog.">
    
    <link rel="preload" href="/blog/assets/css/0.styles.f6e41f29.css" as="style"><link rel="preload" href="/blog/assets/js/app.c7ae8451.js" as="script"><link rel="preload" href="/blog/assets/js/2.ce51b73f.js" as="script"><link rel="preload" href="/blog/assets/js/146.d42546e6.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.1beb9fb6.js"><link rel="prefetch" href="/blog/assets/js/100.abe80486.js"><link rel="prefetch" href="/blog/assets/js/101.7e8c9448.js"><link rel="prefetch" href="/blog/assets/js/102.24b691c1.js"><link rel="prefetch" href="/blog/assets/js/103.9d5bbe7a.js"><link rel="prefetch" href="/blog/assets/js/104.02492daf.js"><link rel="prefetch" href="/blog/assets/js/105.35d26c99.js"><link rel="prefetch" href="/blog/assets/js/106.6caefcb2.js"><link rel="prefetch" href="/blog/assets/js/107.7f018dbf.js"><link rel="prefetch" href="/blog/assets/js/108.68b5390b.js"><link rel="prefetch" href="/blog/assets/js/109.5eb22488.js"><link rel="prefetch" href="/blog/assets/js/11.f59a5659.js"><link rel="prefetch" href="/blog/assets/js/110.58af0555.js"><link rel="prefetch" href="/blog/assets/js/111.8a479732.js"><link rel="prefetch" href="/blog/assets/js/112.8a6693e3.js"><link rel="prefetch" href="/blog/assets/js/113.769eeaab.js"><link rel="prefetch" href="/blog/assets/js/114.5854ec5d.js"><link rel="prefetch" href="/blog/assets/js/115.b1d4c6d0.js"><link rel="prefetch" href="/blog/assets/js/116.e93a9122.js"><link rel="prefetch" href="/blog/assets/js/117.b59f781d.js"><link rel="prefetch" href="/blog/assets/js/118.3237d507.js"><link rel="prefetch" href="/blog/assets/js/119.b089d595.js"><link rel="prefetch" href="/blog/assets/js/12.8e620bc6.js"><link rel="prefetch" href="/blog/assets/js/120.defc4470.js"><link rel="prefetch" href="/blog/assets/js/121.17db9a6b.js"><link rel="prefetch" href="/blog/assets/js/122.f61af818.js"><link rel="prefetch" href="/blog/assets/js/123.2dba53b7.js"><link rel="prefetch" href="/blog/assets/js/124.af1f0677.js"><link rel="prefetch" href="/blog/assets/js/125.9f97169b.js"><link rel="prefetch" href="/blog/assets/js/126.a124c27f.js"><link rel="prefetch" href="/blog/assets/js/127.5039b67f.js"><link rel="prefetch" href="/blog/assets/js/128.e8bbc625.js"><link rel="prefetch" href="/blog/assets/js/129.54faeb5b.js"><link rel="prefetch" href="/blog/assets/js/13.8ca067d3.js"><link rel="prefetch" href="/blog/assets/js/130.c7be364a.js"><link rel="prefetch" href="/blog/assets/js/131.a4b25ea8.js"><link rel="prefetch" href="/blog/assets/js/132.0293e21a.js"><link rel="prefetch" href="/blog/assets/js/133.85805635.js"><link rel="prefetch" href="/blog/assets/js/134.d7162193.js"><link rel="prefetch" href="/blog/assets/js/135.1819cf2b.js"><link rel="prefetch" href="/blog/assets/js/136.420503f7.js"><link rel="prefetch" href="/blog/assets/js/137.2f9cf7f3.js"><link rel="prefetch" href="/blog/assets/js/138.8d4d8c13.js"><link rel="prefetch" href="/blog/assets/js/139.d0495353.js"><link rel="prefetch" href="/blog/assets/js/14.50ab583a.js"><link rel="prefetch" href="/blog/assets/js/140.c54253a1.js"><link rel="prefetch" href="/blog/assets/js/141.fd5d8055.js"><link rel="prefetch" href="/blog/assets/js/142.993cf6dc.js"><link rel="prefetch" href="/blog/assets/js/143.17306524.js"><link rel="prefetch" href="/blog/assets/js/144.ac72b032.js"><link rel="prefetch" href="/blog/assets/js/145.19d8d684.js"><link rel="prefetch" href="/blog/assets/js/147.c4c9684a.js"><link rel="prefetch" href="/blog/assets/js/148.cb307664.js"><link rel="prefetch" href="/blog/assets/js/149.6d15c306.js"><link rel="prefetch" href="/blog/assets/js/15.3c5e8ed3.js"><link rel="prefetch" href="/blog/assets/js/150.ce3ae430.js"><link rel="prefetch" href="/blog/assets/js/151.8a470b86.js"><link rel="prefetch" href="/blog/assets/js/152.17f78ec4.js"><link rel="prefetch" href="/blog/assets/js/153.900d532d.js"><link rel="prefetch" href="/blog/assets/js/154.a12b5474.js"><link rel="prefetch" href="/blog/assets/js/155.cd99b8cc.js"><link rel="prefetch" href="/blog/assets/js/156.58961d5e.js"><link rel="prefetch" href="/blog/assets/js/157.e3f844d0.js"><link rel="prefetch" href="/blog/assets/js/158.b765a66d.js"><link rel="prefetch" href="/blog/assets/js/159.00278ba6.js"><link rel="prefetch" href="/blog/assets/js/16.16e7445a.js"><link rel="prefetch" href="/blog/assets/js/160.3dd808b4.js"><link rel="prefetch" href="/blog/assets/js/161.ebcff228.js"><link rel="prefetch" href="/blog/assets/js/162.fb35b6af.js"><link rel="prefetch" href="/blog/assets/js/163.6a5df0e6.js"><link rel="prefetch" href="/blog/assets/js/164.286f917a.js"><link rel="prefetch" href="/blog/assets/js/165.39c92607.js"><link rel="prefetch" href="/blog/assets/js/166.69878fad.js"><link rel="prefetch" href="/blog/assets/js/167.6cb17f1f.js"><link rel="prefetch" href="/blog/assets/js/168.681a0510.js"><link rel="prefetch" href="/blog/assets/js/169.f21ce171.js"><link rel="prefetch" href="/blog/assets/js/17.06b05f76.js"><link rel="prefetch" href="/blog/assets/js/170.0a847243.js"><link rel="prefetch" href="/blog/assets/js/171.371f6a3b.js"><link rel="prefetch" href="/blog/assets/js/172.00a5890b.js"><link rel="prefetch" href="/blog/assets/js/173.11c0aac5.js"><link rel="prefetch" href="/blog/assets/js/174.c3c6ea0a.js"><link rel="prefetch" href="/blog/assets/js/175.ac4404e2.js"><link rel="prefetch" href="/blog/assets/js/176.0f0a4a58.js"><link rel="prefetch" href="/blog/assets/js/177.0edf559b.js"><link rel="prefetch" href="/blog/assets/js/178.fe296545.js"><link rel="prefetch" href="/blog/assets/js/179.03ca934d.js"><link rel="prefetch" href="/blog/assets/js/18.9e14ffae.js"><link rel="prefetch" href="/blog/assets/js/180.5ffeae88.js"><link rel="prefetch" href="/blog/assets/js/181.41c43ccb.js"><link rel="prefetch" href="/blog/assets/js/182.71c9654e.js"><link rel="prefetch" href="/blog/assets/js/183.3b7f1d4f.js"><link rel="prefetch" href="/blog/assets/js/184.a35b5057.js"><link rel="prefetch" href="/blog/assets/js/185.f3c05299.js"><link rel="prefetch" href="/blog/assets/js/186.b712e209.js"><link rel="prefetch" href="/blog/assets/js/187.018a6074.js"><link rel="prefetch" href="/blog/assets/js/188.53af1940.js"><link rel="prefetch" href="/blog/assets/js/189.e3ec89a1.js"><link rel="prefetch" href="/blog/assets/js/19.e78f2fa8.js"><link rel="prefetch" href="/blog/assets/js/190.a387d8e9.js"><link rel="prefetch" href="/blog/assets/js/191.a712272e.js"><link rel="prefetch" href="/blog/assets/js/192.6a2b89bc.js"><link rel="prefetch" href="/blog/assets/js/193.1b0c6355.js"><link rel="prefetch" href="/blog/assets/js/194.919387f4.js"><link rel="prefetch" href="/blog/assets/js/195.bd66c962.js"><link rel="prefetch" href="/blog/assets/js/196.80364930.js"><link rel="prefetch" href="/blog/assets/js/197.5d672b0b.js"><link rel="prefetch" href="/blog/assets/js/198.fbf8b6ce.js"><link rel="prefetch" href="/blog/assets/js/199.993916fe.js"><link rel="prefetch" href="/blog/assets/js/20.02d46077.js"><link rel="prefetch" href="/blog/assets/js/200.89445d03.js"><link rel="prefetch" href="/blog/assets/js/201.fe1814d2.js"><link rel="prefetch" href="/blog/assets/js/202.fd2a61e2.js"><link rel="prefetch" href="/blog/assets/js/203.0e49ffba.js"><link rel="prefetch" href="/blog/assets/js/204.f61a9d55.js"><link rel="prefetch" href="/blog/assets/js/205.543d5da0.js"><link rel="prefetch" href="/blog/assets/js/206.94c54c88.js"><link rel="prefetch" href="/blog/assets/js/207.68084e73.js"><link rel="prefetch" href="/blog/assets/js/208.be56c5e7.js"><link rel="prefetch" href="/blog/assets/js/209.b12d411e.js"><link rel="prefetch" href="/blog/assets/js/21.02721281.js"><link rel="prefetch" href="/blog/assets/js/210.82b2f7d5.js"><link rel="prefetch" href="/blog/assets/js/211.61dc460a.js"><link rel="prefetch" href="/blog/assets/js/212.e363a5c3.js"><link rel="prefetch" href="/blog/assets/js/213.45dd9f29.js"><link rel="prefetch" href="/blog/assets/js/214.1757528a.js"><link rel="prefetch" href="/blog/assets/js/215.cbdb960f.js"><link rel="prefetch" href="/blog/assets/js/216.4d43829a.js"><link rel="prefetch" href="/blog/assets/js/217.ebfef9e9.js"><link rel="prefetch" href="/blog/assets/js/218.a4a46dff.js"><link rel="prefetch" href="/blog/assets/js/219.f76f7d9a.js"><link rel="prefetch" href="/blog/assets/js/22.02b096c6.js"><link rel="prefetch" href="/blog/assets/js/220.0616d948.js"><link rel="prefetch" href="/blog/assets/js/221.e59d198e.js"><link rel="prefetch" href="/blog/assets/js/222.ff4d53b8.js"><link rel="prefetch" href="/blog/assets/js/223.2554654d.js"><link rel="prefetch" href="/blog/assets/js/224.303529a9.js"><link rel="prefetch" href="/blog/assets/js/225.ace8a61c.js"><link rel="prefetch" href="/blog/assets/js/226.b28e4e0d.js"><link rel="prefetch" href="/blog/assets/js/227.8dc7ebdd.js"><link rel="prefetch" href="/blog/assets/js/228.0cf3cee5.js"><link rel="prefetch" href="/blog/assets/js/229.8de44eb9.js"><link rel="prefetch" href="/blog/assets/js/23.c42cc118.js"><link rel="prefetch" href="/blog/assets/js/230.f5fcc4ac.js"><link rel="prefetch" href="/blog/assets/js/231.36d1727b.js"><link rel="prefetch" href="/blog/assets/js/24.ba86f944.js"><link rel="prefetch" href="/blog/assets/js/25.a821f5e8.js"><link rel="prefetch" href="/blog/assets/js/26.34ed0a98.js"><link rel="prefetch" href="/blog/assets/js/27.70aa64f1.js"><link rel="prefetch" href="/blog/assets/js/28.4c117bc2.js"><link rel="prefetch" href="/blog/assets/js/29.c0a9dd75.js"><link rel="prefetch" href="/blog/assets/js/3.061e6103.js"><link rel="prefetch" href="/blog/assets/js/30.c2609def.js"><link rel="prefetch" href="/blog/assets/js/31.968a28bc.js"><link rel="prefetch" href="/blog/assets/js/32.b12d6c45.js"><link rel="prefetch" href="/blog/assets/js/33.308aa06c.js"><link rel="prefetch" href="/blog/assets/js/34.01e01da5.js"><link rel="prefetch" href="/blog/assets/js/35.05b3a757.js"><link rel="prefetch" href="/blog/assets/js/36.cbc600f0.js"><link rel="prefetch" href="/blog/assets/js/37.91a10538.js"><link rel="prefetch" href="/blog/assets/js/38.795115a2.js"><link rel="prefetch" href="/blog/assets/js/39.d8c875b0.js"><link rel="prefetch" href="/blog/assets/js/4.d07b7ec3.js"><link rel="prefetch" href="/blog/assets/js/40.7f7beacb.js"><link rel="prefetch" href="/blog/assets/js/41.d145792f.js"><link rel="prefetch" href="/blog/assets/js/42.d54125a3.js"><link rel="prefetch" href="/blog/assets/js/43.7dff0c40.js"><link rel="prefetch" href="/blog/assets/js/44.66946af0.js"><link rel="prefetch" href="/blog/assets/js/45.a123261f.js"><link rel="prefetch" href="/blog/assets/js/46.93a944c5.js"><link rel="prefetch" href="/blog/assets/js/47.9d5fe19e.js"><link rel="prefetch" href="/blog/assets/js/48.da029900.js"><link rel="prefetch" href="/blog/assets/js/49.9500ed5d.js"><link rel="prefetch" href="/blog/assets/js/5.2ab15f37.js"><link rel="prefetch" href="/blog/assets/js/50.fa700021.js"><link rel="prefetch" href="/blog/assets/js/51.68b8ebef.js"><link rel="prefetch" href="/blog/assets/js/52.215330c4.js"><link rel="prefetch" href="/blog/assets/js/53.a3540c92.js"><link rel="prefetch" href="/blog/assets/js/54.f8b20cd1.js"><link rel="prefetch" href="/blog/assets/js/55.77869701.js"><link rel="prefetch" href="/blog/assets/js/56.3b6a0969.js"><link rel="prefetch" href="/blog/assets/js/57.a41e9bc2.js"><link rel="prefetch" href="/blog/assets/js/58.6426187b.js"><link rel="prefetch" href="/blog/assets/js/59.2ab1494b.js"><link rel="prefetch" href="/blog/assets/js/6.2da0b1b8.js"><link rel="prefetch" href="/blog/assets/js/60.efd8e688.js"><link rel="prefetch" href="/blog/assets/js/61.bb1bbdfb.js"><link rel="prefetch" href="/blog/assets/js/62.23d21075.js"><link rel="prefetch" href="/blog/assets/js/63.f9e2a06a.js"><link rel="prefetch" href="/blog/assets/js/64.3e21b890.js"><link rel="prefetch" href="/blog/assets/js/65.6dab4a08.js"><link rel="prefetch" href="/blog/assets/js/66.6c2252cf.js"><link rel="prefetch" href="/blog/assets/js/67.a3a0cdd1.js"><link rel="prefetch" href="/blog/assets/js/68.140ae245.js"><link rel="prefetch" href="/blog/assets/js/69.44b7b21f.js"><link rel="prefetch" href="/blog/assets/js/7.9d7d0342.js"><link rel="prefetch" href="/blog/assets/js/70.3220694c.js"><link rel="prefetch" href="/blog/assets/js/71.92555e56.js"><link rel="prefetch" href="/blog/assets/js/72.b37762a2.js"><link rel="prefetch" href="/blog/assets/js/73.7e7fc76b.js"><link rel="prefetch" href="/blog/assets/js/74.b0703d90.js"><link rel="prefetch" href="/blog/assets/js/75.6566c7ed.js"><link rel="prefetch" href="/blog/assets/js/76.ed2c2639.js"><link rel="prefetch" href="/blog/assets/js/77.bbb4b737.js"><link rel="prefetch" href="/blog/assets/js/78.aed264fc.js"><link rel="prefetch" href="/blog/assets/js/79.cbb25814.js"><link rel="prefetch" href="/blog/assets/js/8.5e191761.js"><link rel="prefetch" href="/blog/assets/js/80.ee280a72.js"><link rel="prefetch" href="/blog/assets/js/81.d41d7968.js"><link rel="prefetch" href="/blog/assets/js/82.4a66b793.js"><link rel="prefetch" href="/blog/assets/js/83.d0ab30b9.js"><link rel="prefetch" href="/blog/assets/js/84.a16476c7.js"><link rel="prefetch" href="/blog/assets/js/85.32ee2d6d.js"><link rel="prefetch" href="/blog/assets/js/86.518285f9.js"><link rel="prefetch" href="/blog/assets/js/87.a5a9be60.js"><link rel="prefetch" href="/blog/assets/js/88.d73dd992.js"><link rel="prefetch" href="/blog/assets/js/89.fe06d4ec.js"><link rel="prefetch" href="/blog/assets/js/9.b19d45f5.js"><link rel="prefetch" href="/blog/assets/js/90.4a071a93.js"><link rel="prefetch" href="/blog/assets/js/91.44cad2d6.js"><link rel="prefetch" href="/blog/assets/js/92.9520fa9a.js"><link rel="prefetch" href="/blog/assets/js/93.a174ccab.js"><link rel="prefetch" href="/blog/assets/js/94.4ea5933f.js"><link rel="prefetch" href="/blog/assets/js/95.6ba156f4.js"><link rel="prefetch" href="/blog/assets/js/96.aab7bfca.js"><link rel="prefetch" href="/blog/assets/js/97.83be759c.js"><link rel="prefetch" href="/blog/assets/js/98.567148cf.js"><link rel="prefetch" href="/blog/assets/js/99.f1164495.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.f6e41f29.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="sanyer" class="logo"> <span class="site-name can-hide">sanyer</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/javascript/" class="nav-link router-link-active">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue3/" class="nav-link">
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/babel/" class="nav-link">
  babel
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/weex/" class="nav-link">
  weex
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/electron/" class="nav-link">
  electron
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webrtc/" class="nav-link">
  WebRTC
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/websocket/" class="nav-link">
  WebSocket
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/network/" class="nav-link">
  网络知识
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/design/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/algorithm/" class="nav-link">
  数据结构/算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/interview/" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/booklist/" class="nav-link">
  书单
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/article/website/" class="nav-link">
  站点分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/configure/" class="nav-link">
  配置说明
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/android/" class="nav-link">
  Android
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/pm2/" class="nav-link">
  pm2
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/ffmpeg/" class="nav-link">
  ffmpeg
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/python/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍系列" class="dropdown-title"><span class="title">书籍系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍系列" class="mobile-dropdown-title"><span class="title">书籍系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/original/webdesign/" class="nav-link">
  《从零开始网页设计》
</a></li><li class="dropdown-item"><!----> <a href="/blog/original/js-definitive/" class="nav-link">
  《JavaScript权威指南 第七版》 笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://sanyers.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人简历
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><span class="title">导航</span> <span class="arrow down"></span></button> <button type="button" aria-label="导航" class="mobile-dropdown-title"><span class="title">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/126bb2363acb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sanyers.github.io/qa-system/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端笔记" class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端笔记" class="mobile-dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/javascript/" class="nav-link router-link-active">
  javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/html/" class="nav-link">
  html
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/css/" class="nav-link">
  css
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vue3/" class="nav-link">
  vue3
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/vite/" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/babel/" class="nav-link">
  babel
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/weex/" class="nav-link">
  weex
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/typescript/" class="nav-link">
  typescript
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/node/" class="nav-link">
  node
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/electron/" class="nav-link">
  electron
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/webrtc/" class="nav-link">
  WebRTC
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/websocket/" class="nav-link">
  WebSocket
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/network/" class="nav-link">
  网络知识
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/design/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/algorithm/" class="nav-link">
  数据结构/算法
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/security/" class="nav-link">
  安全
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/interview/" class="nav-link">
  面试题
</a></li><li class="dropdown-item"><!----> <a href="/blog/web/booklist/" class="nav-link">
  书单
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/article/website/" class="nav-link">
  站点分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/configure/" class="nav-link">
  配置说明
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/android/" class="nav-link">
  Android
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/nginx/" class="nav-link">
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/pm2/" class="nav-link">
  pm2
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/npm/" class="nav-link">
  npm
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/ffmpeg/" class="nav-link">
  ffmpeg
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/linux/" class="nav-link">
  linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/article/python/" class="nav-link">
  python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="书籍系列" class="dropdown-title"><span class="title">书籍系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="书籍系列" class="mobile-dropdown-title"><span class="title">书籍系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/original/webdesign/" class="nav-link">
  《从零开始网页设计》
</a></li><li class="dropdown-item"><!----> <a href="/blog/original/js-definitive/" class="nav-link">
  《JavaScript权威指南 第七版》 笔记
</a></li></ul></div></div><div class="nav-item"><a href="https://sanyers.github.io/resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人简历
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="导航" class="dropdown-title"><span class="title">导航</span> <span class="arrow down"></span></button> <button type="button" aria-label="导航" class="mobile-dropdown-title"><span class="title">导航</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/sanyers/blog.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/126bb2363acb" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sanyers.github.io/qa-system/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  面试题
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/web/javascript/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/blog/web/javascript/0.1-什么是JavaScript.html" class="sidebar-link">0.1-什么是JavaScript</a></li><li><a href="/blog/web/javascript/0.2-HTML中的JavaScript.html" class="sidebar-link">0.2-HTML中的JavaScript</a></li><li><a href="/blog/web/javascript/0.3-语言基础.html" class="sidebar-link">0.3-语言基础</a></li><li><a href="/blog/web/javascript/1.1-js数据类型.html" class="sidebar-link">1.1-js数据类型</a></li><li><a href="/blog/web/javascript/1.2-undefined与null的区别.html" class="sidebar-link">1.2-undefined与null的区别</a></li><li><a href="/blog/web/javascript/1.3-js基础数据类型详解.html" class="sidebar-link">1.3-js基础数据类型详解</a></li><li><a href="/blog/web/javascript/1.4-js基本引用类型详解.html" class="sidebar-link">1.4-js基本引用类型详解</a></li><li><a href="/blog/web/javascript/1.5-js集合引用类型详解.html" class="sidebar-link">1.5-js集合引用类型详解</a></li><li><a href="/blog/web/javascript/1.6-Symbol详解.html" class="sidebar-link">1.6-Symbol详解</a></li><li><a href="/blog/web/javascript/2.1-js变量详解.html" class="sidebar-link">2.1-js变量详解</a></li><li><a href="/blog/web/javascript/2.2-js作用域及作用域链.html" class="sidebar-link">2.2-js作用域及作用域链</a></li><li><a href="/blog/web/javascript/2.3-作用域的问题.html" class="sidebar-link">2.3-作用域的问题</a></li><li><a href="/blog/web/javascript/2.4-js执行上下文.html" class="sidebar-link">2.4-js执行上下文</a></li><li><a href="/blog/web/javascript/3-js运算符优先级.html" class="sidebar-link">3-js运算符优先级</a></li><li><a href="/blog/web/javascript/4.1-js对象详解.html" class="sidebar-link">4.1-js对象详解</a></li><li><a href="/blog/web/javascript/4.2-entries和fromEntries用法.html" class="sidebar-link">4.2-entries和fromEntries用法</a></li><li><a href="/blog/web/javascript/5.1-js函数.html" class="sidebar-link">5.1-js函数</a></li><li><a href="/blog/web/javascript/5.2-js函数柯里化.html" class="sidebar-link">5.2-js函数柯里化</a></li><li><a href="/blog/web/javascript/5.3-js函数防抖和节流.html" class="sidebar-link">5.3-js函数防抖和节流</a></li><li><a href="/blog/web/javascript/5.4-Promise与异步函数.html" class="sidebar-link">5.4-Promise与异步函数</a></li><li><a href="/blog/web/javascript/6-js迭代器与生成器.html" class="sidebar-link">6-js迭代器与生成器</a></li><li><a href="/blog/web/javascript/7-js代理与反射.html" class="sidebar-link">7-js代理与反射</a></li><li><a href="/blog/web/javascript/8.1-DOM.html" class="sidebar-link">8.1-DOM</a></li><li><a href="/blog/web/javascript/8.2-DOM扩展.html" class="active sidebar-link">8.2-DOM扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_1、selectors-api" class="sidebar-link">1、Selectors API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_1-1-queryselector" class="sidebar-link">1.1 querySelector()</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_1-2-queryselectorall" class="sidebar-link">1.2 querySelectorAll()</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_1-3-matches" class="sidebar-link">1.3 matches()</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_2、元素遍历" class="sidebar-link">2、元素遍历</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3、html5" class="sidebar-link">3、HTML5</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3-1-css-类扩展" class="sidebar-link">3.1 CSS 类扩展</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3-2-焦点管理" class="sidebar-link">3.2 焦点管理</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3-3-htmldocument-扩展" class="sidebar-link">3.3 HTMLDocument 扩展</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3-4-字符集属性" class="sidebar-link">3.4 字符集属性</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3-5-自定义数据属性" class="sidebar-link">3.5 自定义数据属性</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3-6-插入标记" class="sidebar-link">3.6 插入标记</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_3-7-scrollintoview" class="sidebar-link">3.7 scrollIntoView()</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_4、专有扩展" class="sidebar-link">4、专有扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_4-1-children-属性" class="sidebar-link">4.1 children 属性</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_4-2-contains-方法" class="sidebar-link">4.2 contains() 方法</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_4-3-插入标记" class="sidebar-link">4.3 插入标记</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_4-4-滚动" class="sidebar-link">4.4 滚动</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_5、dom2和dom3" class="sidebar-link">5、DOM2和DOM3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_5-1-内嵌窗格" class="sidebar-link">5.1 内嵌窗格</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_5-2-样式" class="sidebar-link">5.2 样式</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_5-3-元素尺寸" class="sidebar-link">5.3 元素尺寸</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_5-4-遍历" class="sidebar-link">5.4 遍历</a></li><li class="sidebar-sub-header"><a href="/blog/web/javascript/8.2-DOM扩展.html#_5-5-范围" class="sidebar-link">5.5 范围</a></li></ul></li></ul></li><li><a href="/blog/web/javascript/8.3-BOM.html" class="sidebar-link">8.3-BOM</a></li><li><a href="/blog/web/javascript/9.1-事件.html" class="sidebar-link">9.1-事件</a></li><li><a href="/blog/web/javascript/10-动画与canvas图形.html" class="sidebar-link">10-动画与canvas图形</a></li><li><a href="/blog/web/javascript/11-错误处理与调试.html" class="sidebar-link">11-错误处理与调试</a></li><li><a href="/blog/web/javascript/12.1-处理XML.html" class="sidebar-link">12.1-处理XML</a></li><li><a href="/blog/web/javascript/12.2-处理JSON.html" class="sidebar-link">12.2-处理JSON</a></li><li><a href="/blog/web/javascript/13-网络请求.html" class="sidebar-link">13-网络请求</a></li><li><a href="/blog/web/javascript/14-客户端存储.html" class="sidebar-link">14-客户端存储</a></li><li><a href="/blog/web/javascript/15-模块化.html" class="sidebar-link">15-模块化</a></li><li><a href="/blog/web/javascript/16.1-垃圾回收.html" class="sidebar-link">16.1-垃圾回收</a></li><li><a href="/blog/web/javascript/16.2-内存泄漏.html" class="sidebar-link">16.2-内存泄漏</a></li><li><a href="/blog/web/javascript/17-工作者线程.html" class="sidebar-link">17-工作者线程</a></li><li><a href="/blog/web/javascript/18-es6~es13.html" class="sidebar-link">18-es6~es13</a></li><li><a href="/blog/web/javascript/19.1-jsapi.html" class="sidebar-link">19.1-jsapi</a></li><li><a href="/blog/web/javascript/19.2-js处理二进制.html" class="sidebar-link">19.2-js处理二进制</a></li><li><a href="/blog/web/javascript/20.1-js面试题汇总-上.html" class="sidebar-link">20.1-js面试题汇总-上</a></li><li><a href="/blog/web/javascript/20.2-js面试题汇总-下.html" class="sidebar-link">20.2-js面试题汇总-下</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom-扩展"><a href="#dom-扩展" class="header-anchor">#</a> DOM 扩展</h1> <p>两个标准：Selectors API 与 HTML5。</p> <h2 id="_1、selectors-api"><a href="#_1、selectors-api" class="header-anchor">#</a> 1、Selectors API</h2> <p>JavaScript 库中最流行的一种能力就是根据 CSS 选择符的模式匹配 DOM 元素。比如，jQuery 就完全以 CSS 选择符查询 DOM 获取元素引用，而不是使用 getElementById() 和 getElementsByTagName()。</p> <p>Selectors API（参见 W3C 网站上的 Selectors API Level 1）是 W3C 推荐标准，规定了浏览器原生支持的 CSS 查询 API。支持这一特性的所有 JavaScript 库都会实现一个基本的 CSS 解析器，然后使用已有的 DOM 方法搜索文档并匹配目标节点。</p> <p>Selectors API Level 1 的核心是两个方法：querySelector() 和 querySelectorAll()。</p> <p>Selectors API Level 2 规范在 Element 类型上新增了更多方法，比如 matches()、find()和 findAll()。不过，目前还没有浏览器实现或宣称实现 find() 和 findAll()。</p> <h3 id="_1-1-queryselector"><a href="#_1-1-queryselector" class="header-anchor">#</a> 1.1 querySelector()</h3> <p>方法接收 CSS 选择符参数，返回匹配该模式的第一个后代元素，如果没有匹配项则返回 null</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 取得&lt;body&gt;元素</span>
<span class="token keyword">let</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 取得 ID 为&quot;myDiv&quot;的元素</span>
<span class="token keyword">let</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 取得类名为&quot;selected&quot;的第一个元素</span>
<span class="token keyword">let</span> selected <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 取得类名为&quot;button&quot;的图片</span>
<span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;img.button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-2-queryselectorall"><a href="#_1-2-queryselectorall" class="header-anchor">#</a> 1.2 querySelectorAll()</h3> <p>返回所有匹配的节点，而不止一个。这个方法返回的是一个 NodeList 的<strong>静态实例</strong>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 取得 ID 为&quot;myDiv&quot;的&lt;div&gt;元素中的所有&lt;em&gt;元素</span>
<span class="token keyword">let</span> ems <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;em&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 取得所有类名中包含&quot;selected&quot;的元素</span>
<span class="token keyword">let</span> selecteds <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 取得所有是&lt;p&gt;元素子元素的&lt;strong&gt;元素</span>
<span class="token keyword">let</span> strongs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;p strong&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_1-3-matches"><a href="#_1-3-matches" class="header-anchor">#</a> 1.3 matches()</h3> <p>matches() 方法（在规范草案中称为 matchesSelector()）接收一个 CSS 选择符参数，如果元素匹配则该选择符返回 true，否则返回 false。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">&quot;body.page1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
 <span class="token comment">// true </span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_2、元素遍历"><a href="#_2、元素遍历" class="header-anchor">#</a> 2、元素遍历</h2> <p>W3C 通过新的 Element Traversal 规范定义了一组新属性。</p> <p>Element Traversal API 为 DOM 元素添加了 5 个属性：</p> <ul><li><code>childElementCount</code>，返回子元素数量（不包含文本节点和注释）；</li> <li><code>firstElementChild</code>，指向第一个 Element 类型的子元素（Element 版 firstChild）；</li> <li><code>lastElementChild</code>，指向最后一个 Element 类型的子元素（Element 版 lastChild）；</li> <li><code>previousElementSibling</code>，指向前一个 Element 类型的同胞元素（ Element 版 previousSibling）；</li> <li><code>nextElementSibling</code>，指向后一个 Element 类型的同胞元素（Element 版 nextSibling）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> parentElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'parent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">let</span> currentChildElement <span class="token operator">=</span> parentElement<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">;</span>
<span class="token comment">// 没有子元素，firstElementChild 返回 null，跳过循环</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>currentChildElement<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 这就是元素节点，做相应处理</span>
  <span class="token function">processChild</span><span class="token punctuation">(</span>currentChildElement<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentChildElement <span class="token operator">===</span> parentElement<span class="token punctuation">.</span>lastElementChild<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">break</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
  currentChildElement <span class="token operator">=</span> currentChildElement<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_3、html5"><a href="#_3、html5" class="header-anchor">#</a> 3、HTML5</h2> <h3 id="_3-1-css-类扩展"><a href="#_3-1-css-类扩展" class="header-anchor">#</a> 3.1 CSS 类扩展</h3> <ul><li><code>getElementsByClassName()</code> 类名中包含相应类的元素的 NodeList</li> <li><code>classList</code> 操作类名</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 取得所有类名中包含&quot;username&quot;和&quot;current&quot;元素</span>
<span class="token comment">// 这两个类名的顺序无关紧要</span>
<span class="token keyword">let</span> allCurrentUsernames <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;username current&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 取得 ID 为&quot;myDiv&quot;的元素子树中所有包含&quot;selected&quot;类的元素</span>
<span class="token keyword">let</span> selected <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// classList 用法</span>

<span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;bd user disabled&quot;</span><span class="token operator">&gt;</span><span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token comment">// 要删除&quot;user&quot;类</span>
<span class="token keyword">let</span> targetClass <span class="token operator">=</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">;</span> 
<span class="token comment">// 把类名拆成数组</span>
<span class="token keyword">let</span> classNames <span class="token operator">=</span> div<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 找到要删除类名的索引</span>
<span class="token keyword">let</span> idx <span class="token operator">=</span> classNames<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>targetClass<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 如果有则删除</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>idx <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 classNames<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token comment">// 重新设置类名</span>
div<span class="token punctuation">.</span>className <span class="token operator">=</span> classNames<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>classList 还支持如下方法：</p> <ul><li>add(value)，向类名列表中添加指定的字符串值 value。如果这个值已经存在，则什么也不做。</li> <li>contains(value)，返回布尔值，表示给定的 value 是否存在。</li> <li>remove(value)，从类名列表中删除指定的字符串值 value。</li> <li>toggle(value)，如果类名列表中已经存在指定的 value，则删除；如果不存在，则添加。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-2-焦点管理"><a href="#_3-2-焦点管理" class="header-anchor">#</a> 3.2 焦点管理</h3> <p>HTML5 增加了辅助 DOM 焦点管理的功能。</p> <p>document.activeElement，始终包含当前拥有焦点的 DOM 元素。页面加载时，可以通过用户输入（按 Tab 键或代码中使用 focus() 方法）让某个元素自动获得焦点。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
button<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>activeElement <span class="token operator">===</span> button<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>默认情况下，document.activeElement 在页面刚加载完之后会设置为 document.body。而在页面完全加载之前，document.activeElement 的值为 null。</p> <p>document.hasFocus()，该方法返回布尔值，表示文档是否拥有焦点：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
button<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">hasFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-3-htmldocument-扩展"><a href="#_3-3-htmldocument-扩展" class="header-anchor">#</a> 3.3 HTMLDocument 扩展</h3> <p>（1）readyState 属性</p> <p>document.readyState 属性有两个可能的值：</p> <ul><li>loading，表示文档正在加载；</li> <li>complete，表示文档加载完成。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token string">&quot;complete&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
 <span class="token comment">// 执行操作</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（2）compatMode 属性</p> <p>检测页面的渲染模式</p> <p>标准模式下 document.compatMode 的值是&quot;CSS1Compat&quot;，而在混杂模式下，document.compatMode 的值是&quot;BackCompat&quot;</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>compatMode <span class="token operator">==</span> <span class="token string">&quot;CSS1Compat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Standards mode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Quirks mode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>（3）head 属性</p> <p>HTML5 增加了 document.head 属性，指向文档的<code>&lt;head&gt;</code>元素。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> head <span class="token operator">=</span> document<span class="token punctuation">.</span>head<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-4-字符集属性"><a href="#_3-4-字符集属性" class="header-anchor">#</a> 3.4 字符集属性</h3> <p>characterSet 属性表示文档实际使用的字符集，也可以用来指定新字符集。这个属性的默认值是&quot;UTF-16&quot;，但可以通过<code>&lt;meta&gt;</code>元素或响应头，以及新增的 characterSeet 属性来修改。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>characterSet<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;UTF-16&quot; </span>
document<span class="token punctuation">.</span>characterSet <span class="token operator">=</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-5-自定义数据属性"><a href="#_3-5-自定义数据属性" class="header-anchor">#</a> 3.5 自定义数据属性</h3> <p>HTML5 允许给元素指定非标准的属性，使用前缀 data- ，不包含与渲染、元素的语义信息等。除了前缀，自定义属性对命名是没有限制，data- 后可以任意字符串。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDiv<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-appId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>12345<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-myname</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Nicholas<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>定义了自定义数据属性后，可以通过元素的 dataset 属性来访问。dataset 属性是一个 DOMStringMap 的实例，包含一组键/值对映射。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 取得自定义数据属性的值</span>
<span class="token keyword">let</span> appId <span class="token operator">=</span> div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>appId<span class="token punctuation">;</span> 
<span class="token keyword">let</span> myName <span class="token operator">=</span> div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>myname<span class="token punctuation">;</span> 

<span class="token comment">// 设置自定义数据属性的值</span>
div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>appId <span class="token operator">=</span> <span class="token number">23456</span><span class="token punctuation">;</span> 
div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>myname <span class="token operator">=</span> <span class="token string">&quot;Michael&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-6-插入标记"><a href="#_3-6-插入标记" class="header-anchor">#</a> 3.6 插入标记</h3> <p>批量处理节点，提高读取和写入的效率。</p> <p>（1）innerHTML 属性</p> <p>在读取 innerHTML 属性时，会返回元素所有后代的 HTML 字符串，包括元素、注释和文本节点。</p> <p>在写入 innerHTML 时，则会根据提供的字符串值以新的 DOM 子树替代元素中原来包含的所有节点。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读取</span>
div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 写入</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>在所有现代浏览器中，通过 innerHTML 插入的<code>&lt;script&gt;</code>标签是不会执行的。而在 IE8 及之前的版本中，只要这样插入的<code>&lt;script&gt;</code>元素指定了 defer 属性，且<code>&lt;script&gt;</code>之前是“受控元素”（scoped element），那就是可以执行的。<code>&lt;script&gt;</code>元素与<code>&lt;style&gt;</code>或注释一样，都是“非受控元素”（NoScope element），也就是在页面上看不到它们。IE 会把 innerHTML 中从非受控元素开始的内容都删掉，</p></blockquote> <p>（2）outerHTML 属性</p> <p>读取 outerHTML 属性时，会返回<strong>元素本身</strong>（及所有后代元素）的 HTML 字符串。在写入 outerHTML 属性时，调用它的元素会被传入的 HTML 字符串经解释之后生成的 DOM 子树取代。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">let</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回包含ul标签以及所有子元素</span>

content<span class="token punctuation">.</span>outerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;p&gt;This is a paragraph.&lt;/p&gt;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 此操作将ui标签替换为p标签</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>（3）insertAdjacentHTML() 与 insertAdjacentText()</p> <p>接收两个参数，第一个参数必须是下列值中的一个：</p> <ul><li>&quot;beforebegin&quot;，插入当前元素前面，作为前一个同胞节点；</li> <li>&quot;afterbegin&quot;，插入当前元素内部，作为新的子节点或放在第一个子节点前面；</li> <li>&quot;beforeend&quot;，插入当前元素内部，作为新的子节点或放在最后一个子节点后面；</li> <li>&quot;afterend&quot;，插入当前元素后面，作为下一个同胞节点。</li></ul> <p>注意这几个值是不区分大小写的。第二个参数会作为 HTML 字符串解析（与 innerHTML 和 outerHTML 相同）或者作为纯文本解析（与 innerText 和 outerText 相同）。</p> <p>（4）内存与性能问题</p> <p>使用本节介绍的方法替换子节点可能在浏览器（特别是 IE）中导致内存问题。比如，如果被移除的子树元素中之前有关联的事件处理程序或其他 JavaScript 对象（作为元素的属性），那它们之间的绑定关系会滞留在内存中。如果这种替换操作频繁发生，页面的内存占用就会持续攀升。在使用 innerHTML、outerHTML 和 insertAdjacentHTML() 之前，最好手动删除要被替换的元素上关联的事件处理程序和 JavaScript 对象。</p> <p>限制使用 innerHTML 和 outerHTML 的次数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> values<span class="token punctuation">)</span><span class="token punctuation">{</span> 
 ul<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token string">'&lt;li&gt;${value}&lt;/li&gt;'</span><span class="token punctuation">;</span> <span class="token comment">// 每次迭代都要读取一次 innerHTML，设置一次 innerHTML</span>
<span class="token punctuation">}</span> 

<span class="token comment">// 建议一次性修改</span>
ul<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token string">'&lt;li&gt;${value}&lt;/li&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-7-scrollintoview"><a href="#_3-7-scrollintoview" class="header-anchor">#</a> 3.7 scrollIntoView()</h3> <p>scrollIntoView() 方法存在于所有 HTML 元素上，可以滚动浏览器窗口或容器元素以便包含元素进入视口。这个方法的参数如下：</p> <ul><li>alignToTop 是一个布尔值。不传参数等同于 alignToTop 为 true。
<ul><li>true：窗口滚动后元素的顶部与视口顶部对齐。</li> <li>false：窗口滚动后元素的底部与视口底部对齐。</li></ul></li> <li>scrollIntoViewOptions 是一个选项对象。
<ul><li>behavior：定义过渡动画，可取的值为&quot;smooth&quot;和&quot;auto&quot;，默认为&quot;auto&quot;。</li> <li>block：定义垂直方向的对齐，可取的值为&quot;start&quot;、&quot;center&quot;、&quot;end&quot;和&quot;nearest&quot;，默认为 &quot;start&quot;。</li> <li>inline：定义水平方向的对齐，可取的值为&quot;start&quot;、&quot;center&quot;、&quot;end&quot;和&quot;nearest&quot;，默认为 &quot;nearest&quot;。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 确保元素可见</span>
document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 同上</span>
document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">block</span><span class="token operator">:</span> <span class="token string">'start'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 尝试将元素平滑地滚入视口</span>
document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">'smooth'</span><span class="token punctuation">,</span> <span class="token literal-property property">block</span><span class="token operator">:</span> <span class="token string">'start'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_4、专有扩展"><a href="#_4、专有扩展" class="header-anchor">#</a> 4、专有扩展</h2> <h3 id="_4-1-children-属性"><a href="#_4-1-children-属性" class="header-anchor">#</a> 4.1 children 属性</h3> <p>IE9 之前的版本与其他浏览器在处理空白文本节点上的差异导致了 children 属性的出现。children 属性是一个 HTMLCollection，只包含元素的 Element 类型的子节点。如果元素的子节点类型全部是元素类型，那 children 和 childNodes 中包含的节点应该是一样的。</p> <p>可以像下面这样使用 children 属性：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> childCount <span class="token operator">=</span> element<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> 
<span class="token keyword">let</span> firstChild <span class="token operator">=</span> element<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-2-contains-方法"><a href="#_4-2-contains-方法" class="header-anchor">#</a> 4.2 contains() 方法</h3> <p>contains() 方法应该在要搜索的祖先元素上调用，参数是待确定的目标节点。contains() 方法应该在要搜索的祖先元素上调用，参数是待确定的目标节点。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 DOM Level 3 的 compareDocumentPosition() 方法也可以确定节点间的关系。</p> <table><thead><tr><th style="text-align:center;">掩 码</th> <th style="text-align:center;">节点关系</th></tr></thead> <tbody><tr><td style="text-align:center;">0x1</td> <td style="text-align:center;">断开（传入的节点不在文档中）</td></tr> <tr><td style="text-align:center;">0x2</td> <td style="text-align:center;">领先（传入的节点在 DOM 树中位于参考节点之前）</td></tr> <tr><td style="text-align:center;">0x4</td> <td style="text-align:center;">随后（传入的节点在 DOM 树中位于参考节点之后）</td></tr> <tr><td style="text-align:center;">0x8</td> <td style="text-align:center;">包含（传入的节点是参考节点的祖先）</td></tr> <tr><td style="text-align:center;">0x10</td> <td style="text-align:center;">被包含（传入的节点是参考节点的后代）</td></tr></tbody></table> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">compareDocumentPosition</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>result <span class="token operator">&amp;</span> <span class="token number">0x10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>IE9 及之后的版本，以及所有现代浏览器都支持 contains() 和 compareDocumentPosition() 方法。</p></blockquote> <h3 id="_4-3-插入标记"><a href="#_4-3-插入标记" class="header-anchor">#</a> 4.3 插入标记</h3> <p>（1）innerText 属性</p> <p>innerText 属性对应元素中包含的所有文本内容，无论文本在子树中哪个层级。</p> <p>在用于读取值时，innerText 会按照深度优先的顺序将子树中所有文本节点的值拼接起来。</p> <p>在用于写入值时，innerText 会移除元素的所有后代并插入一个包含该值的文本节点。</p> <p>使用方法和 innerHTML 一致。</p> <p>（2）outerText 属性</p> <p>outerText 与 innerText 是类似的，只不过作用范围包含调用它的节点。</p> <p>使用方法和 outerHTML 一致。</p> <h3 id="_4-4-滚动"><a href="#_4-4-滚动" class="header-anchor">#</a> 4.4 滚动</h3> <p>scrollIntoViewIfNeeded()作 为 HTMLElement 类型的扩展可以在所有元素上调用。scrollIntoViewIfNeeded(alingCenter) 会在元素不可见的情况下，将其滚动到窗口或包含窗口中，使其可见；如果已经在视口中可见，则这个方法什么也不做。如果将可选的参数 alingCenter 设置为 true，则浏览器会尝试将其放在视口中央。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如果不可见，则将元素可见</span>
document<span class="token punctuation">.</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">scrollIntoViewIfNeeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_5、dom2和dom3"><a href="#_5、dom2和dom3" class="header-anchor">#</a> 5、DOM2和DOM3</h2> <p>DOM1（DOM Level 1）主要定义了 HTML 和 XML 文档的底层结构。</p> <p>DOM2（DOM Level 2）和 DOM3（DOM Level 3）在这些结构之上加入更多交互能力，提供了更高级的 XML 特性。</p> <ul><li>DOM Core：在 DOM1 核心部分的基础上，为节点增加方法和属性。</li> <li>DOM Views：定义基于样式信息的不同视图。</li> <li>DOM Events：定义通过事件实现 DOM 文档交互。</li> <li>DOM Style：定义以编程方式访问和修改 CSS 样式的接口。</li> <li>DOM Traversal and Range：新增遍历 DOM 文档及选择文档内容的接口。</li> <li>DOM HTML：在 DOM1 HTML 部分的基础上，增加属性、方法和新接口。</li> <li>DOM Mutation Observers：定义基于 DOM 变化触发回调的接口。这个模块是 DOM4 级模块，用于取代 Mutation Events。</li></ul> <h3 id="_5-1-内嵌窗格"><a href="#_5-1-内嵌窗格" class="header-anchor">#</a> 5.1 内嵌窗格</h3> <p>DOM2 HTML 给 HTMLIFrameElement（即<code>&lt;iframe&gt;</code>，内嵌窗格）类型新增了一个属性，叫 contentDocument。这个属性包含代表子内嵌窗格中内容的 document 对象的指针。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myIframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">let</span> iframeDoc <span class="token operator">=</span> iframe<span class="token punctuation">.</span>contentDocument<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>contentDocument 属性是 Document 的实例，拥有所有文档属性和方法，因此可以像使用其他 HTML 文档一样使用它。还有一个属性 contentWindow，返回相应窗格的 window 对象，这个对象上有一个 document 属性。所有现代浏览器都支持 contentDocument 和 contentWindow 属性。</p> <blockquote><p>跨源访问子内嵌窗格的 document 对象会受到安全限制。如果内嵌窗格中加载了不同域名（或子域名）的页面，或者该页面使用了不同协议，则访问其 document 对象会抛出错误。</p></blockquote> <h3 id="_5-2-样式"><a href="#_5-2-样式" class="header-anchor">#</a> 5.2 样式</h3> <p>HTML 中的样式有 3 种定义方式：外部样式表（通过<code>&lt;link&gt;</code>元素）、文档样式表（使用<code>&lt;style&gt;</code>元素）和元素特定样式（使用 style 属性）。</p> <p>(1) 存取元素样式</p> <table><thead><tr><th style="text-align:center;">CSS 属性</th> <th style="text-align:center;">JavaScript 属性</th></tr></thead> <tbody><tr><td style="text-align:center;">background-image</td> <td style="text-align:center;">style.backgroundImage</td></tr> <tr><td style="text-align:center;">color</td> <td style="text-align:center;">style.color</td></tr> <tr><td style="text-align:center;">display</td> <td style="text-align:center;">style.display</td></tr> <tr><td style="text-align:center;">font-family</td> <td style="text-align:center;">style.fontFamily</td></tr></tbody></table> <p>大多数属性名会这样直接转换过来。但有一个 CSS 属性名不能直接转换，它就是 float。因为 float 是 JavaScript 的保留字，所以不能用作属性名。DOM2 Style 规定它在 style 对象中对应的属性应该是 cssFloat。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置背景颜色</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 修改大小</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;100px&quot;</span><span class="token punctuation">;</span>
myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;200px&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>style 属性的信息和修改方法：</p> <ul><li><code>cssText</code>，包含 style 属性中的 CSS 代码。</li> <li><code>length</code>，应用给元素的 CSS 属性数量。</li> <li><code>parentRule</code>，表示 CSS 信息的 CSSRule 对象（下一节会讨论 CSSRule 类型）。</li> <li><code>getPropertyCSSValue(propertyName)</code>，返回包含 CSS 属性 propertyName 值的 CSSValue 对象（已废弃）。</li> <li><code>getPropertyPriority(propertyName)</code>，如果 CSS 属性 propertyName 使用了!important 则返回&quot;important&quot;，否则返回空字符串。</li> <li><code>getPropertyValue(propertyName)</code>，返回属性 propertyName 的字符串值。</li> <li><code>item(index)</code>，返回索引为 index 的 CSS 属性名。</li> <li><code>removeProperty(propertyName)</code>，从样式中删除 CSS 属性 propertyName。</li> <li><code>setProperty(propertyName, value, priority)</code>，设置 CSS 属性 propertyName 的值为 value，priority 是&quot;important&quot;或空字符串。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;width: 25px; height: 100px; background-color: green&quot;</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（2）计算样式</p> <p>getComputedStyle() 方法返回一个 CSSStyleDeclaration 对象（与 style 属性的类型一样），包含元素的计算样式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">let</span> computedStyle <span class="token operator">=</span> document<span class="token punctuation">.</span>defaultView<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>myDiv<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;red&quot; </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>computedStyle<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;100px&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>（3）操作样式表</p> <p>CSSStyleSheet 类型表示 CSS 样式表，包括使用<code>&lt;link&gt;</code>元素和通过<code>&lt;style&gt;</code>元素定义的样式表。注意，这两个元素本身分别是 HTMLLinkElement 和 HTMLStyleElement。CSSStyleSheet 类型是一个通用样式表类型，可以表示以任何方式在 HTML 中定义的样式表。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> sheet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  sheet <span class="token operator">=</span> document<span class="token punctuation">.</span>styleSheets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sheet<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-3-元素尺寸"><a href="#_5-3-元素尺寸" class="header-anchor">#</a> 5.3 元素尺寸</h3> <p>（1）偏移尺寸</p> <p>包含元素在屏幕上占用的所有视觉空间。元素在页面上的视觉空间由其高度和宽度决定，包括所有内边距、滚动条和边框（但不包含外边距）。</p> <ul><li><code>offsetHeight</code>，元素在垂直方向上占用的像素尺寸，包括它的高度、水平滚动条高度（如果可见）和上、下边框的高度。</li> <li><code>offsetLeft</code>，元素左边框外侧距离包含元素左边框内侧的像素数。</li> <li><code>offsetTop</code>，元素上边框外侧距离包含元素上边框内侧的像素数。</li> <li><code>offsetWidth</code>，元素在水平方向上占用的像素尺寸，包括它的宽度、垂直滚动条宽度（如果可见）和左、右边框的宽度。</li></ul> <div class="img-page"><a data-fancybox="" title="偏移尺寸" href="/blog/img/web/js/page_8.png"><img src="/blog/img/web/js/page_8.png" alt="偏移尺寸"></a></div> <blockquote><p>所有这些偏移尺寸属性都是只读的，每次访问都会重新计算。因此，应该尽量减少查询它们的次数。比如把查询的值保存在局量中，就可以避免影响性能。</p></blockquote> <p>（2）客户端尺寸</p> <p>元素的客户端尺寸（client dimensions）包含元素内容及其内边距所占用的空间。客户端尺寸只有两个相关属性：clientWidth 和 clientHeight。</p> <ul><li>clientWidth 是内容区宽度加左、右内边距宽度</li> <li>clientHeight 是内容区高度加上、下内边距高度。</li></ul> <div class="img-page"><a data-fancybox="" title="客户端尺寸" href="/blog/img/web/js/page_9.png"><img src="/blog/img/web/js/page_9.png" alt="客户端尺寸"></a></div> <p>客户端尺寸实际上就是元素内部的空间，因此不包含滚动条占用的空间。这两个属性最常用于确定浏览器视口尺寸，即检测 document.documentElement 的 clientWidth 和 clientHeight。</p> <p>这两个属性表示视口（<code>&lt;html&gt;</code>或<code>&lt;body&gt;</code>元素）的尺寸</p> <blockquote><p>与偏移尺寸一样，客户端尺寸也是只读的，而且每次访问都会重新计算。</p></blockquote> <p>（3）滚动尺寸</p> <p>滚动尺寸（scroll dimensions），提供了元素内容滚动距离的信息。有些元素，比如<code>&lt;html&gt;</code>无须任何代码就可以自动滚动，而其他元素则需要使用 CSS 的 overflow 属性令其滚动。</p> <ul><li><code>scrollHeight</code>，没有滚动条出现时，元素内容的总高度。</li> <li><code>scrollLeft</code>，内容区左侧隐藏的像素数，设置这个属性可以改变元素的滚动位置。</li> <li><code>scrollTop</code>，内容区顶部隐藏的像素数，设置这个属性可以改变元素的滚动位置。</li> <li><code>scrollWidth</code>，没有滚动条出现时，元素内容的总宽度。</li></ul> <div class="img-page"><a data-fancybox="" title="滚动尺寸" href="/blog/img/web/js/page_10.png"><img src="/blog/img/web/js/page_10.png" alt="滚动尺寸"></a></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 数检测元素是不是位于顶部，如果不是则把它滚动回顶部</span>
<span class="token keyword">function</span> <span class="token function">scrollToTop</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>scrollTop <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    element<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>（4）确定元素尺寸</p> <p>浏览器在每个元素上都暴露了 getBoundingClientRect() 方法，返回一个 DOMRect 对象，包含 6 个属性：left、top、right、bottom、height 和 width。这些属性给出了元素在页面中相对于视口的位置。</p> <div class="img-page"><a data-fancybox="" title="元素尺寸" href="/blog/img/web/js/page_11.png"><img src="/blog/img/web/js/page_11.png" alt="元素尺寸"></a></div> <h3 id="_5-4-遍历"><a href="#_5-4-遍历" class="header-anchor">#</a> 5.4 遍历</h3> <p>DOM2 Traversal and Range 模块定义了两个类型用于辅助顺序遍历 DOM 结构。这两个类型 —— NodeIterator 和 TreeWalker —— 从某个起点开始执行对 DOM 结构的深度优先遍历。</p> <p>DOM 遍历是对 DOM 结构的深度优先遍历，至少允许朝两个方向移动（取决于类型）。遍历以给定节点为根，不能在 DOM 中向上超越这个根节点。</p> <h3 id="_5-5-范围"><a href="#_5-5-范围" class="header-anchor">#</a> 5.5 范围</h3> <p>（1）DOM 范围</p> <p>createRange() 使用这个方法可以创建一个 DOM 范围对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>每个范围都是 Range 类型的实例，拥有相应的属性和方法。</p> <ul><li>startContainer，范围起点所在的节点（选区中第一个子节点的父节点）。</li> <li>startOffset，范围起点在 startContainer 中的偏移量。如果 startContainer 是文本节点、注释节点或 CData 区块节点，则 startOffset 指范围起点之前跳过的字符数；否则，表示范围中第一个节点的索引。</li> <li>endContainer，范围终点所在的节点（选区中最后一个子节点的父节点）。</li> <li>endOffset，范围起点在 startContainer 中的偏移量（与 startOffset 中偏移量的含义相同）。</li> <li>commonAncestorContainer，文档中以startContainer和endContainer为后代的最深的节点。</li></ul> <p>（2）简单选择</p> <p>selectNode() 和 selectNodeContents() 方法都接收一个节点作为参数，并将该节点的信息添加到调用它的范围。selectNode() 方法选择整个节点，包括其后代节点，而 selectNodeContents() 只选择节点的后代。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span> 
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span> 
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>p1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span> world!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> 
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> range1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
 range2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
 p1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
range1<span class="token punctuation">.</span><span class="token function">selectNode</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> 
range2<span class="token punctuation">.</span><span class="token function">selectNodeContents</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/9/2022, 6:56:39 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/web/javascript/8.1-DOM.html" class="prev">
        8.1-DOM
      </a></span> <span class="next"><a href="/blog/web/javascript/8.3-BOM.html">
        8.3-BOM
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.c7ae8451.js" defer></script><script src="/blog/assets/js/2.ce51b73f.js" defer></script><script src="/blog/assets/js/146.d42546e6.js" defer></script>
  </body>
</html>
