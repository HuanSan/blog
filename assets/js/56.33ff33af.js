(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{338:function(e,a,s){"use strict";s.r(a);var t=s(10),r=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"docker部署whisper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker部署whisper"}},[e._v("#")]),e._v(" docker部署whisper")]),e._v(" "),a("p",[e._v("whipser模型支持将视频或者语音文件转为文本或字幕")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/openai/whisper",target:"_blank",rel:"noopener noreferrer"}},[e._v("whisper"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/ahmetoner/whisper-asr-webservice",target:"_blank",rel:"noopener noreferrer"}},[e._v("whisper-asr-webservice"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("9000")]),e._v(":9000 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),e._v(" whisper "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--restart")]),e._v(" always "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" /home/sanyer/whisper:/root/.cache/whisper "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-e")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("ASR_MODEL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("small onerahmet/openai-whisper-asr-webservice:latest\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("-v /home/sanyer/whisper:/root/.cache/whisper 映射模型文件目录")])]),e._v(" "),a("p",[e._v("运行之后在浏览器输入以下地址")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("http://localhost:9000/\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[e._v("/asr")]),e._v(" 语音识别接口，上传语音或者视频文件，输出文字")]),e._v(" "),a("li",[a("code",[e._v("/detect-language")]),e._v(" 语言检测接口，上传语音或者视频文件，输出语言")])]),e._v(" "),a("p",[e._v("接口参数：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("encode")]),e._v(" 是否编码，"),a("code",[e._v("true")]),e._v(" | "),a("code",[e._v("false")]),e._v(" 默认 "),a("code",[e._v("true")])]),e._v(" "),a("li",[a("code",[e._v("task")]),e._v(" 任务，"),a("code",[e._v("transcribe")]),e._v(" 将语音识别为文字，"),a("code",[e._v("translate")]),e._v(" 翻译为英文")]),e._v(" "),a("li",[a("code",[e._v("language")]),e._v(" 源文件语言（如果源文件是英文，但是参数填写为中文，识别程序就会以中文来识别，结果就是完全错的）")]),e._v(" "),a("li",[a("code",[e._v("initial_prompt")]),e._v(" 初始化提示")]),e._v(" "),a("li",[a("code",[e._v("word_timestamps")]),e._v(" 单词级别的时间戳。在输出格式为json时起作用，会输出每个单词的开始时间、结束时间、识别正确的可能性")]),e._v(" "),a("li",[a("code",[e._v("output")]),e._v(" 输出格式，"),a("code",[e._v("txt")]),e._v(" 文本格式，"),a("code",[e._v("vtt、srt")]),e._v(" 字幕格式，可以给视频制作字幕，"),a("code",[e._v("tsv")]),e._v(" 类似于csv的一种制表符分隔的数据格式，"),a("code",[e._v("json")]),e._v(" 可以输出非常详细的信息")]),e._v(" "),a("li",[a("code",[e._v("audio_file")]),e._v(" 上传文件")])]),e._v(" "),a("p",[e._v("支持语言列表：https://github.com/openai/whisper/blob/main/whisper/tokenizer.py")]),e._v(" "),a("p",[e._v("参考：")]),e._v(" "),a("p",[e._v("https://zhuanlan.zhihu.com/p/678406937")]),e._v(" "),a("p",[e._v("https://zhuanlan.zhihu.com/p/595691785")]),e._v(" "),a("p",[e._v("https://blog.csdn.net/TechAI/article/details/136903249")])])}),[],!1,null,null,null);a.default=r.exports}}]);